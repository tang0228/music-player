(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[21],{1241:function(e,t,n){"use strict";var c=n(27),s=n(1),a=n(1242),r=n.n(a),i=n(40),o=n(1247),u=n.n(o),m=n(108),l=n(18),d=n(10);t.a=Object(m.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,n=Object(s.useState)(!1),a=Object(c.a)(n,2),o=a[0],m=a[1],j=Object(s.useState)(""),p=Object(c.a)(j,2),b=p[0],h=p[1],O=Object(s.useCallback)((function(e,t){}),[]);return Object(d.jsxs)("div",{className:r.a.commit,id:"comment",children:[Object(d.jsxs)("div",{className:"commit-header",children:[Object(d.jsx)("h3",{className:"title",children:"\u8bc4\u8bba"}),Object(d.jsxs)("span",{className:"nums",children:["\u5171",e.commitNum,"\u6761\u8bc4\u8bba"]})]}),Object(d.jsxs)("div",{className:"commit-wrap",children:[Object(d.jsx)("img",{src:t?t.avatarUrl:"http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50",alt:""}),Object(d.jsxs)("div",{className:"commit-content",children:[Object(d.jsx)(i.w,{placeholder:"\u8bc4\u8bba",value:b,onChange:function(e){h(e)},maxCount:e.commitLength}),Object(d.jsxs)("div",{className:"commit-opearte",children:[Object(d.jsx)(l.I,{onClick:function(){m(!o)}}),Object(d.jsx)(i.c,{onClick:function(){b?(h(""),e.commit&&e.commit(b)):i.x.warning({content:"\u8bf7\u5148\u8f93\u5165\u5185\u5bb9\u54e6\ud83d\ude0a",duration:2})},children:"\u8bc4\u8bba"})]}),o?Object(d.jsx)("div",{className:"emoji-box",children:Object(d.jsx)(u.a,{onEmojiClick:O})}):null]})]})]})}))},1242:function(e,t,n){e.exports={commit:"index_commit__2Pc8Z"}},1243:function(e,t,n){e.exports={"comment-list":"commitList_comment-list__V9s6g"}},1244:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u}));var c=n(32),s=n(19),a=n.n(s),r=n(36);function i(e){return o.apply(this,arguments)}function o(){return(o=Object(c.a)(a.a.mark((function e(t){var n,c,s,i,o,u,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.t,c=t.type,s=t.id,i=t.content,o=t.commentId,u=t.timestamp,e.next=3,r.a.post("/comment",{t:n,type:c,id:s,content:i,commentId:o,timestamp:u});case 3:return m=e.sent,e.abrupt("return",m);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(a.a.mark((function e(t){var n,c,s,i,o,u,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.cid,s=t.t,i=t.type,o=t.threadId,u=t.timestamp,e.next=3,r.a.post("/comment/like",{id:n,cid:c,t:s,type:i,threadId:o,timestamp:u});case 3:return m=e.sent,e.abrupt("return",m);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1245:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(1);var c=n(1243),s=n.n(c),a=n(1214),r=n.n(a),i=n(62),o=n(18),u=n(108),m=n(10);var l=Object(u.b)((function(e){return{user:e.user}}))((function(e){var t=e.c,n=e.user;return Object(m.jsxs)("li",{className:"comment-item",children:[Object(m.jsx)(i.b,{to:"/user/home?uid="+t.user.userId,children:Object(m.jsx)(r.a,{height:50,debounce:500,placeholder:Object(m.jsx)("img",{width:50,height:50,src:"http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50"}),children:Object(m.jsx)("img",{src:t.user.avatarUrl,alt:""})})}),Object(m.jsxs)("div",{className:"comment-desc",children:[Object(m.jsxs)("p",{className:"comment-content",children:[Object(m.jsx)(i.b,{className:"name",to:"/user/home?uid="+t.user.userId,children:t.user.nickname}),Object(m.jsx)("span",{className:"divider",children:":"}),Object(m.jsx)("span",{className:"content",children:t.content})]}),t.beReplied.length?t.beReplied.map((function(e){return Object(m.jsx)("div",{className:"beReplied",children:Object(m.jsxs)("p",{className:"comment-content",children:[Object(m.jsx)(i.b,{className:"name",to:"/user/home?uid="+e.user.userId,children:e.user.nickname}),Object(m.jsx)("span",{className:"divider",children:":"}),Object(m.jsx)("span",{className:"content",children:e.content})]})},e.beRepliedCommentId)})):null,Object(m.jsxs)("div",{className:"comment-points",children:[Object(m.jsx)("span",{className:"time",children:t.timeStr}),Object(m.jsxs)("div",{className:"operate",children:[n&&t.user.userId===n.userId?Object(m.jsxs)("span",{className:"del-wrap",children:[Object(m.jsx)("span",{className:"reback",onClick:function(){e.delComment&&e.delComment(t.commentId)},children:"\u5220\u9664"}),Object(m.jsx)("span",{className:"line",children:"|"})]}):null,Object(m.jsxs)("span",{className:t.liked?"like liked":"like",onClick:function(){e.commentLike&&e.commentLike(t.commentId,t.liked)},children:[Object(m.jsx)(o.L,{}),t.likedCount?Object(m.jsxs)("span",{className:"num",children:["(",t.likedCount,")"]}):null]}),Object(m.jsx)("span",{className:"line",children:"|"}),Object(m.jsx)("span",{className:"reback",children:"\u56de\u590d"})]})]})]})]},t.commentId)}));function d(e){var t=e.total,n=e.comments,c=e.hotComments,a=function(t,n){e.like&&e.like(t,n)},r=function(t){e.del&&e.del(t)};return Object(m.jsxs)("div",{className:s.a["comment-list"],children:[c&&c.length?Object(m.jsxs)("ul",{className:"comment",children:[Object(m.jsx)("li",{className:"header",children:Object(m.jsx)("h3",{className:"title",children:"\u7cbe\u5f69\u8bc4\u8bba"})}),c.map((function(e){return Object(m.jsx)(l,{commentLike:a,delComment:r,c:e},e.commentId)}))]}):null,Object(m.jsx)("br",{}),Object(m.jsx)("br",{}),n&&n.length?Object(m.jsxs)("ul",{className:"comment",children:[Object(m.jsx)("li",{className:"header",children:Object(m.jsxs)("h3",{className:"title",children:["\u6700\u65b0\u8bc4\u8bba(",t,")"]})}),n.map((function(e){return Object(m.jsx)(l,{commentLike:a,delComment:r,c:e},e.commentId)}))]}):null]})}},1339:function(e,t,n){e.exports={"mv-detail":"index_mv-detail__VHRPP"}},1340:function(e,t,n){e.exports={"mv-left":"mvLeft_mv-left__25Ug8"}},1341:function(e,t,n){e.exports={"mv-right":"MvRight_mv-right__2oEc0"}},1384:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return J}));var c=n(32),s=n(27),a=n(19),r=n.n(a),i=n(1),o=n(59),u=n(36);function m(e){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mvid,e.next=3,u.a.get("/mv/detail",{params:{mvid:n}});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.mvid,e.next=3,u.a.get("/mv/detail/info",{params:{mvid:n}});case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(r.a.mark((function e(t){var n,c,s,a,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.limit,s=t.offset,a=t.timestamp,e.next=3,u.a.get("/comment/mv",{params:{id:n,limit:c,offset:s,timestamp:a}});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("/personalized/mv");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(c.a)(r.a.mark((function e(t){var n,c,s,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.r,s=void 0===c?1080:c,e.next=3,u.a.get("/mv/url",{params:{id:n,r:s}});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=n(1217),v=n.n(f),N=n(1339),g=n.n(N),y=n(1340),w=n.n(y),k=n(62),C=n(18),I=n(40),S=n(1241),_=n(1245),D=n(1244),L=n(10);function E(e){var t=e.mvDetail,n=e.id,a=Object(i.useState)({}),o=Object(s.a)(a,2),u=o[0],m=o[1],l=Object(i.useState)([]),j=Object(s.a)(l,2),b=j[0],h=j[1],O=Object(i.useState)([]),f=Object(s.a)(O,2),v=f[0],N=f[1],g=Object(i.useState)(0),y=Object(s.a)(g,2),E=y[0],z=y[1],R=Object(i.useState)(1),P=Object(s.a)(R,2),M=P[0],U=P[1],V=Object(i.useState)(20),F=Object(s.a)(V,2),J=F[0],T=F[1],H=Object(i.useState)(!1),Z=Object(s.a)(H,2),q=Z[0],A=Z[1],B=Object(i.useState)(""),G=Object(s.a)(B,2),K=G[0],Q=G[1];Object(i.useEffect)((function(){return Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({mvid:n});case 2:200===(t=e.sent).code&&m(t);case 4:case"end":return e.stop()}}),e)})))(),function(){}}),[n]);var W=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)({t:1,type:1,content:t,id:n,timestamp:Date.now()});case 2:200===e.sent.code&&(I.x.success({content:"\u8bc4\u8bba\u6210\u529f",duration:2}),X());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,p({id:n,limit:J,offset:(M-1)*J,timestamp:Date.now()});case 3:200===(t=e.sent).code&&(A(!1),z(t.total),h(t.comments),N(t.hotComments));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){return X(),function(){}}),[n,J,M]);var Y=function(){var e=Object(c.a)(r.a.mark((function e(t,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.b)({id:n,cid:t,t:c?0:1,type:1,timestamp:Date.now()});case 2:200===e.sent.code?(c?I.x.success({content:"\u53d6\u6d88\u8d5e\u6210\u529f",duration:2}):I.x.success({content:"\u8d5e\u6210\u529f",duration:2}),X()):I.x.error({content:"\u64cd\u4f5c\u5931\u8d25"});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)({t:0,type:1,id:n,commentId:t,timestamp:Date.now()});case 2:200===e.sent.code&&(I.x.success({content:"\u5220\u9664\u6210\u529f",duration:2}),X());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){return function(e){return x.apply(this,arguments)}({id:n}).then((function(e){200===e.code&&Q(e.data.url)})),function(){}}),[n]),Object(L.jsxs)("div",{className:w.a["mv-left"],children:[Object(L.jsxs)("div",{className:"top",children:[Object(L.jsxs)("div",{className:"top-name",children:[Object(L.jsx)("span",{className:"name-icon",children:"MV"}),Object(L.jsx)("h3",{className:"name-mvname",children:t.name}),t.artists.map((function(e,t){return 0===t?Object(L.jsx)(k.b,{to:"/find/artist?id="+e.id,className:"name-artist",children:e.name},e.id):Object(L.jsxs)(k.b,{to:"/find/artist?id="+e.id,className:"name-artist",children:[Object(L.jsx)("span",{className:"divider",children:"/"}),e.name]},e.id)}))]}),Object(L.jsx)("div",{className:"top-img",children:Object(L.jsx)("video",{className:"mv-video",src:K,preload:1,controls:!0,poster:t.cover})}),u?Object(L.jsx)("div",{className:"top-btns",children:Object(L.jsxs)(I.r,{children:[Object(L.jsxs)(I.c,{type:"tertiary",icon:Object(L.jsx)(C.L,{}),children:["(",u.likedCount,")"]}),Object(L.jsxs)(I.c,{type:"tertiary",icon:Object(L.jsx)(C.R,{}),children:["(",t.subCount,")"]}),Object(L.jsxs)(I.c,{type:"tertiary",icon:Object(L.jsx)(C.E,{}),children:["(",u.shareCount,")"]})]})}):null]}),Object(L.jsx)(S.a,{commitNum:E,commit:W,commitLength:140}),Object(L.jsx)(_.a,{like:Y,del:$,total:E,comments:b,hotComments:v}),E>0?Object(L.jsx)("div",{className:"pagination-wrapper",children:Object(L.jsx)(I.k,{total:E,currentPage:M,onPageChange:function(e){U(e)},showSizeChanger:!0,pageSize:J,pageSizeOpts:[20,30,50],onPageSizeChange:function(e){T(e)}})}):null,Object(L.jsx)(I.s,{spinning:q,tip:"loading...",size:"large",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"9999"}})]})}var z=n(1341),R=n.n(z),P=n(91),M=n(1214),U=n.n(M);function V(e){var t=e.mvDetail,n=Object(i.useState)([]),a=Object(s.a)(n,2),o=a[0],u=a[1];return Object(i.useEffect)((function(){return Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:200===(t=e.sent).code&&u(t.result);case 4:case"end":return e.stop()}}),e)})))(),function(){}}),[]),Object(L.jsxs)("div",{className:R.a["mv-right"],children:[Object(L.jsxs)("div",{className:"mv-row",children:[Object(L.jsx)("h3",{className:"title",children:"MV\u7b80\u4ecb"}),Object(L.jsxs)("div",{className:"desc-content",children:[Object(L.jsxs)("div",{className:"text",children:["\u53d1\u5e03\u65f6\u95f4\uff1a",P.a.formatDate(t.publishTime)]}),Object(L.jsxs)("div",{className:"text",children:["\u64ad\u653e\u6b21\u6570\uff1a",t.playCount>1e4?parseInt(t.playCount/1e4)+"\u4e07\u6b21":t.playCount+"\u6b21"]}),Object(L.jsx)("div",{className:"desc",children:t.desc})]})]}),Object(L.jsxs)("div",{className:"mv-row",children:[Object(L.jsx)("h3",{className:"title",children:"\u76f8\u5173\u63a8\u8350"}),Object(L.jsx)("ul",{className:"mv-list",children:o?o.map((function(e){return Object(L.jsxs)("li",{className:"item",children:[Object(L.jsx)("div",{className:"img-wrap",children:Object(L.jsxs)(k.b,{to:"/find/mv?id="+e.id,children:[Object(L.jsx)(U.a,{children:Object(L.jsx)("img",{src:e.picUrl,alt:""})}),Object(L.jsxs)("div",{className:"img-top",children:[Object(L.jsx)(C.eb,{}),Object(L.jsx)("span",{className:"count",children:e.playCount>1e4?parseFloat(e.playCount/1e4)+"\u4e07":e.playCount})]})]})}),Object(L.jsxs)("div",{className:"mv-info",children:[Object(L.jsx)(k.b,{to:"/find/mv?id="+e.id,className:"name",children:e.name}),Object(L.jsx)("span",{className:"time",children:P.a.formatTime(e.duration)}),Object(L.jsxs)("span",{className:"by",children:["by ",Object(L.jsx)(k.b,{className:"artist",to:"/user/home?uid="+e.artistId,children:e.artistName})]})]})]},e.id)})):null})]})]})}var F=n(1246);function J(){var e=Object(o.h)(),t=v.a.parse(e.search).id,n=Object(i.useState)(null),a=Object(s.a)(n,2),u=a[0],l=a[1];return Object(i.useEffect)((function(){return Object(c.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({mvid:t});case 2:200===(n=e.sent).code&&l(n.data);case 4:case"end":return e.stop()}}),e)})))(),function(){}}),[t]),Object(L.jsx)(L.Fragment,{children:u?Object(L.jsxs)("div",{className:g.a["mv-detail"],children:[Object(L.jsx)("div",{className:"left",children:Object(L.jsx)(E,{mvDetail:u,id:t})}),Object(L.jsx)("div",{className:"right",children:Object(L.jsx)(V,{mvDetail:u,id:t})})]}):Object(L.jsx)(I.f,{image:Object(L.jsx)(F.IllustrationConstruction,{style:{width:150,height:150}}),darkModeImage:Object(L.jsx)(F.IllustrationConstructionDark,{style:{width:150,height:150}}),description:"\u4fe1\u606f\u4e22\u5931",style:{padding:30}})})}}}]);
//# sourceMappingURL=21.173a5ec9.chunk.js.map