{"version":3,"sources":["assets/loading.svg","pages/Album/AlbumList/index.module.less","pages/Album/AlbumList/item.module.less","services/album.js","pages/Album/AlbumList/Item.jsx","pages/Album/AlbumList/index.jsx"],"names":["module","exports","a","limit","offset","area","ins","get","params","res","Item","props","className","style","to","id","height","debounce","placeholder","width","src","loadingUrl","blurPicUrl","alt","size","color","name","artist","navs","text","target","AlbumList","useState","albums","setAlbums","total","setTotal","list","setList","loading","setLoading","page","setPage","location","useLocation","query_area","qs","parse","search","useEffect","getAlbumNewest","then","code","splice","err","console","log","Toast","error","content","duration","getAlbumList","map","al","n","i","currentPage","onPageChange","pageSize","spinning","tip","position","top","left","transform","zIndex"],"mappings":"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","file":"static/js/29.62d5e882.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/loading.4c0ea1e7.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"album-list\":\"index_album-list__6OFJv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"album-item\":\"item_album-item__3e6iz\"};","import ins from \"./request\";\r\n\r\n// 获取新碟列表\r\nexport async function getAlbumList({ limit, offset, area }) {\r\n    const res = await ins.get(\"/album/new\", {\r\n        params: {\r\n            limit, offset, area\r\n        }\r\n    });\r\n    return res;\r\n}","import React from 'react';\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { IconPlayCircle } from \"@douyinfe/semi-icons\";\r\nimport style from \"./item.module.less\";\r\nimport loadingUrl from \"@/assets/loading.svg\";\r\n\r\nexport default function Item(props) {\r\n    return (\r\n        <div className={style[\"album-item\"]} key={props.id}>\r\n            <div className=\"album-img\">\r\n                <Link to={'/find/album?id=' + props.id}>\r\n                    <LazyLoad height={130} debounce={500} placeholder={<img width=\"100%\" height=\"100%\" src={loadingUrl} />}>\r\n                        <img src={props.blurPicUrl} alt=\"\" />\r\n                    </LazyLoad>\r\n                    <span className='al-mask'></span>\r\n                </Link>\r\n                <IconPlayCircle size=\"large\" style={{\r\n                    color: \"#eee\"\r\n                }} />\r\n            </div>\r\n            <Link to={'/find/album?id=' + props.id} className=\"album-name\">{props.name}</Link>\r\n            <Link to={'/find/artist?id=' + props.artist.id} className=\"singer-name\">{props.artist.name}</Link>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react';\r\nimport style from \"./index.module.less\";\r\nimport { getAlbumList } from '../../../services/album';\r\nimport { getAlbumNewest } from \"../../../services/apis\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { Pagination, Spin, Toast } from \"@douyinfe/semi-ui\";\r\nimport Item from \"./Item\";\r\nimport qs from \"query-string\";\r\n\r\nconst navs = [\r\n    { text: \"全部\", target: \"ALL\" },\r\n    { text: \"华语\", target: \"ZH\" },\r\n    { text: \"欧美\", target: \"EA\" },\r\n    { text: \"韩国\", target: \"KR\" },\r\n    { text: \"日本\", target: \"JP\" },\r\n];\r\n\r\nexport default function AlbumList() {\r\n    const [albums, setAlbums] = useState([]); // 新碟\r\n    const [total, setTotal] = useState(0);\r\n    const [list, setList] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [page, setPage] = useState(1);\r\n    const location = useLocation();\r\n    let query_area = qs.parse(location.search).area || 'ALL';\r\n    // 获取新碟\r\n    useEffect(() => {\r\n        getAlbumNewest().then(res => {\r\n            if (res.code === 200) {\r\n                setAlbums(res.albums.splice(0, 10));\r\n            }\r\n        }, err => {\r\n            console.log(err, 123)\r\n            Toast.error({\r\n                content: err,\r\n                duration: 2\r\n            })\r\n        })\r\n        return () => {\r\n        }\r\n    }, []);\r\n\r\n    // 获取分类光碟列表\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        getAlbumList({\r\n            limit: 35,\r\n            offset: (page - 1) * 35,\r\n            area: query_area,\r\n        }).then(res => {\r\n            if (res.code === 200) {\r\n                setTotal(res.total);\r\n                setList(res.albums);\r\n                setLoading(false);\r\n            }\r\n        }, err => {\r\n            setLoading(false);\r\n            Toast.error({\r\n                content: err,\r\n                duration: 2\r\n            })\r\n        })\r\n        return () => {\r\n        }\r\n    }, [page, query_area]);\r\n\r\n    // 页码变化\r\n    const handlePageChange = page => {\r\n        setPage(page);\r\n    }\r\n\r\n    return (\r\n        <div className={style['album-list']}>\r\n            <div className=\"header\">\r\n                <div className=\"title\">热门新碟</div>\r\n            </div>\r\n            <div className=\"album-wrapper\">\r\n                {albums ? albums.map(al => <Item key={al.id} {...al} />) : null}\r\n            </div>\r\n            <div className=\"header\">\r\n                <div className=\"title\">全部新碟</div>\r\n                <div className=\"cat-nav\">\r\n                    {navs.map((n, i) => <Link key={n.target} to={\"/find/album/list?area=\" + n.target} className='item'>{n.text} {i < 4 ? <span className='line'>|</span> : ''}</Link>)}\r\n                </div>\r\n            </div>\r\n            <div className=\"album-wrapper\">\r\n                {list ? list.map(al => <Item key={al.id} {...al} />) : null}\r\n            </div>\r\n            {total > 0 ? (\r\n                <div className=\"pagination-wrapper\">\r\n                    <Pagination\r\n                        total={total}\r\n                        currentPage={page}\r\n                        onPageChange={handlePageChange}\r\n                        pageSize={35}\r\n                    ></Pagination>\r\n                </div>\r\n            ) : null}\r\n            <Spin\r\n                spinning={loading}\r\n                tip=\"loading...\"\r\n                size=\"large\"\r\n                style={{\r\n                    position: \"fixed\",\r\n                    top: \"50%\",\r\n                    left: \"50%\",\r\n                    transform: \"translate(-50%, -50%)\",\r\n                    zIndex: \"9999\",\r\n                }}\r\n            ></Spin>\r\n        </div >\r\n    )\r\n}\r\n"],"sourceRoot":""}