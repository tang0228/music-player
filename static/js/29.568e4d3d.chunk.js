(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[29],{1216:function(e,t,n){"use strict";t.a=n.p+"static/media/loading.4c0ea1e7.svg"},1362:function(e,t,n){e.exports={"album-list":"index_album-list__6OFJv"}},1363:function(e,t,n){e.exports={"album-item":"item_album-item__3e6iz"}},1392:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));var a=n(135),c=n(27),i=n(1),s=n(1362),r=n.n(s),u=n(32),l=n(19),o=n.n(l),d=n(36);function b(){return(b=Object(u.a)(o.a.mark((function e(t){var n,a,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.limit,a=t.offset,c=t.area,e.next=3,d.a.get("/album/new",{params:{limit:n,offset:a,area:c}});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=n(132),m=n(59),f=n(62),p=n(40),O=n(1214),x=n.n(O),h=n(1363),g=n.n(h),v=n(1216),N=n(109),S=n(178),w=n(108),y=n(10);var k=Object(w.b)((function(e){return{curSongId:e.curSongId}}),(function(e){return{setCurSongId:function(){return e(S.b.apply(void 0,arguments))},addSongs:function(){return e(N.f.apply(void 0,arguments))}}}))((function(e){var t=e.setCurSongId,n=e.addSongs;return Object(y.jsxs)("div",{className:g.a["album-item"],children:[Object(y.jsxs)("div",{className:"album-img",children:[Object(y.jsxs)(f.b,{to:"/find/album?id="+e.id,children:[Object(y.jsx)(x.a,{height:130,debounce:500,placeholder:Object(y.jsx)("img",{width:"100%",height:"100%",src:v.a}),children:Object(y.jsx)("img",{src:e.blurPicUrl,alt:""})}),Object(y.jsx)("span",{className:"al-mask"})]}),Object(y.jsx)("i",{className:"icon-album-play",onClick:function(e){Object(j.a)({id:e}).then((function(e){if(200===e.code){p.x.success({content:"\u6210\u529f\u6dfb\u52a0\u65b0\u789f\u5230\u64ad\u653e\u5217\u8868",duration:2});var a=e.songs.map((function(e){return{id:e.id,url:"https://music.163.com/song/media/outer/url?id="+e.id+".mp3",song:e}}));n(a),t(a[0].id)}}))}.bind(null,e.id)})]}),Object(y.jsx)(f.b,{to:"/find/album?id="+e.id,className:"album-name",children:e.name}),Object(y.jsx)(f.b,{to:"/find/artist?id="+e.artist.id,className:"singer-name",children:e.artist.name})]},e.id)})),_=n(1217),I=n.n(_),z=[{text:"\u5168\u90e8",target:"ALL"},{text:"\u534e\u8bed",target:"ZH"},{text:"\u6b27\u7f8e",target:"EA"},{text:"\u97e9\u56fd",target:"KR"},{text:"\u65e5\u672c",target:"JP"}];function C(){var e=Object(i.useState)([]),t=Object(c.a)(e,2),n=t[0],s=t[1],u=Object(i.useState)(0),l=Object(c.a)(u,2),o=l[0],d=l[1],O=Object(i.useState)([]),x=Object(c.a)(O,2),h=x[0],g=x[1],v=Object(i.useState)(!1),N=Object(c.a)(v,2),S=N[0],w=N[1],_=Object(i.useState)(1),C=Object(c.a)(_,2),J=C[0],L=C[1],P=Object(m.h)(),A=I.a.parse(P.search).area||"ALL";Object(i.useEffect)((function(){return Object(j.c)().then((function(e){200===e.code&&s(e.albums.splice(0,10))}),(function(e){console.log(e,123),p.x.error({content:e,duration:2})})),function(){}}),[]),Object(i.useEffect)((function(){return w(!0),function(e){return b.apply(this,arguments)}({limit:35,offset:35*(J-1),area:A}).then((function(e){200===e.code&&(d(e.total),g(e.albums),w(!1))}),(function(e){w(!1),p.x.error({content:e,duration:2})})),function(){}}),[J,A]);return Object(y.jsxs)("div",{className:r.a["album-list"],children:[Object(y.jsx)("div",{className:"header",children:Object(y.jsx)("div",{className:"title",children:"\u70ed\u95e8\u65b0\u789f"})}),Object(y.jsx)("div",{className:"album-wrapper",children:n?n.map((function(e){return Object(y.jsx)(k,Object(a.a)({},e),e.id)})):null}),Object(y.jsxs)("div",{className:"header",children:[Object(y.jsx)("div",{className:"title",children:"\u5168\u90e8\u65b0\u789f"}),Object(y.jsx)("div",{className:"cat-nav",children:z.map((function(e,t){return Object(y.jsxs)(f.b,{to:"/find/album/list?area="+e.target,className:"item",children:[e.text," ",t<4?Object(y.jsx)("span",{className:"line",children:"|"}):""]},e.target)}))})]}),Object(y.jsx)("div",{className:"album-wrapper",children:h?h.map((function(e){return Object(y.jsx)(k,Object(a.a)({},e),e.id)})):null}),o>0?Object(y.jsx)("div",{className:"pagination-wrapper",children:Object(y.jsx)(p.k,{total:o,currentPage:J,onPageChange:function(e){L(e)},pageSize:35})}):null,Object(y.jsx)(p.s,{spinning:S,tip:"loading...",size:"large",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"9999"}})]})}}}]);
//# sourceMappingURL=29.568e4d3d.chunk.js.map