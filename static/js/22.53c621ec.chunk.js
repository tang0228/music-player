(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[22],{1238:function(e,t,c){"use strict";var n=c(30),s=c(1),a=c(1239),i=c.n(a),r=c(40),l=c(1244),o=c.n(l),j=c(107),d=c(18),m=c(15);t.a=Object(j.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,c=Object(s.useState)(!1),a=Object(n.a)(c,2),l=a[0],j=a[1],u=Object(s.useState)(""),b=Object(n.a)(u,2),O=b[0],x=b[1],h=Object(s.useCallback)((function(e,t){}),[]);return Object(m.jsxs)("div",{className:i.a.commit,id:"comment",children:[Object(m.jsxs)("div",{className:"commit-header",children:[Object(m.jsx)("h3",{className:"title",children:"\u8bc4\u8bba"}),Object(m.jsxs)("span",{className:"nums",children:["\u5171",e.commitNum,"\u6761\u8bc4\u8bba"]})]}),Object(m.jsxs)("div",{className:"commit-wrap",children:[Object(m.jsx)("img",{src:t?t.avatarUrl:"http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50",alt:""}),Object(m.jsxs)("div",{className:"commit-content",children:[Object(m.jsx)(r.w,{placeholder:"\u8bc4\u8bba",value:O,onChange:function(e){x(e)},maxCount:e.commitLength}),Object(m.jsxs)("div",{className:"commit-opearte",children:[Object(m.jsx)(d.I,{onClick:function(){j(!l)}}),Object(m.jsx)(r.c,{onClick:function(){O?(x(""),e.commit&&e.commit(O)):r.x.warning({content:"\u8bf7\u5148\u8f93\u5165\u5185\u5bb9\u54e6\ud83d\ude0a",duration:2})},children:"\u8bc4\u8bba"})]}),l?Object(m.jsx)("div",{className:"emoji-box",children:Object(m.jsx)(o.a,{onEmojiClick:h})}):null]})]})]})}))},1239:function(e,t,c){e.exports={commit:"index_commit__2Pc8Z"}},1240:function(e,t,c){e.exports={"comment-list":"commitList_comment-list__V9s6g"}},1241:function(e,t,c){"use strict";c.d(t,"a",(function(){return r})),c.d(t,"b",(function(){return o}));var n=c(32),s=c(19),a=c.n(s),i=c(36);function r(e){return l.apply(this,arguments)}function l(){return(l=Object(n.a)(a.a.mark((function e(t){var c,n,s,r,l,o,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.t,n=t.type,s=t.id,r=t.content,l=t.commentId,o=t.timestamp,e.next=3,i.a.post("/comment",{t:c,type:n,id:s,content:r,commentId:l,timestamp:o});case 3:return j=e.sent,e.abrupt("return",j);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return j.apply(this,arguments)}function j(){return(j=Object(n.a)(a.a.mark((function e(t){var c,n,s,r,l,o,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.id,n=t.cid,s=t.t,r=t.type,l=t.threadId,o=t.timestamp,e.next=3,i.a.post("/comment/like",{id:c,cid:n,t:s,type:r,threadId:l,timestamp:o});case 3:return j=e.sent,e.abrupt("return",j);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1242:function(e,t,c){"use strict";c.d(t,"a",(function(){return m}));c(1);var n=c(1240),s=c.n(n),a=c(1211),i=c.n(a),r=c(90),l=c(18),o=c(107),j=c(15);var d=Object(o.b)((function(e){return{user:e.user}}))((function(e){var t=e.c,c=e.user;return Object(j.jsxs)("li",{className:"comment-item",children:[Object(j.jsx)(r.b,{to:"/user/home?uid="+t.user.userId,children:Object(j.jsx)(i.a,{height:50,debounce:500,placeholder:Object(j.jsx)("img",{width:50,height:50,src:"http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50"}),children:Object(j.jsx)("img",{src:t.user.avatarUrl,alt:""})})}),Object(j.jsxs)("div",{className:"comment-desc",children:[Object(j.jsxs)("p",{className:"comment-content",children:[Object(j.jsx)(r.b,{className:"name",to:"/user/home?uid="+t.user.userId,children:t.user.nickname}),Object(j.jsx)("span",{className:"divider",children:":"}),Object(j.jsx)("span",{className:"content",children:t.content})]}),t.beReplied.length?t.beReplied.map((function(e){return Object(j.jsx)("div",{className:"beReplied",children:Object(j.jsxs)("p",{className:"comment-content",children:[Object(j.jsx)(r.b,{className:"name",to:"/user/home?uid="+e.user.userId,children:e.user.nickname}),Object(j.jsx)("span",{className:"divider",children:":"}),Object(j.jsx)("span",{className:"content",children:e.content})]})},e.beRepliedCommentId)})):null,Object(j.jsxs)("div",{className:"comment-points",children:[Object(j.jsx)("span",{className:"time",children:t.timeStr}),Object(j.jsxs)("div",{className:"operate",children:[c&&t.user.userId===c.userId?Object(j.jsxs)("span",{className:"del-wrap",children:[Object(j.jsx)("span",{className:"reback",onClick:function(){e.delComment&&e.delComment(t.commentId)},children:"\u5220\u9664"}),Object(j.jsx)("span",{className:"line",children:"|"})]}):null,Object(j.jsxs)("span",{className:t.liked?"like liked":"like",onClick:function(){e.commentLike&&e.commentLike(t.commentId,t.liked)},children:[Object(j.jsx)(l.L,{}),t.likedCount?Object(j.jsxs)("span",{className:"num",children:["(",t.likedCount,")"]}):null]}),Object(j.jsx)("span",{className:"line",children:"|"}),Object(j.jsx)("span",{className:"reback",children:"\u56de\u590d"})]})]})]})]},t.commentId)}));function m(e){var t=e.total,c=e.comments,n=e.hotComments,a=function(t,c){e.like&&e.like(t,c)},i=function(t){e.del&&e.del(t)};return Object(j.jsxs)("div",{className:s.a["comment-list"],children:[n&&n.length?Object(j.jsxs)("ul",{className:"comment",children:[Object(j.jsx)("li",{className:"header",children:Object(j.jsx)("h3",{className:"title",children:"\u7cbe\u5f69\u8bc4\u8bba"})}),n.map((function(e){return Object(j.jsx)(d,{commentLike:a,delComment:i,c:e},e.commentId)}))]}):null,Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),c&&c.length?Object(j.jsxs)("ul",{className:"comment",children:[Object(j.jsx)("li",{className:"header",children:Object(j.jsxs)("h3",{className:"title",children:["\u6700\u65b0\u8bc4\u8bba(",t,")"]})}),c.map((function(e){return Object(j.jsx)(d,{commentLike:a,delComment:i,c:e},e.commentId)}))]}):null]})}},1323:function(e,t,c){e.exports={"song-detail":"index_song-detail__2Bp7r"}},1324:function(e,t,c){e.exports={"detail-left":"detailLeft_detail-left__1z4Yl"}},1325:function(e,t,c){e.exports={"detail-right":"detailRight_detail-right__jMZe9"}},1383:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return z}));var n=c(32),s=c(30),a=c(19),i=c.n(a),r=c(1),l=c(1323),o=c.n(l),j=c(59),d=c(1214),m=c.n(d),u=c(174),b=c(1324),O=c.n(b),x=c(90),h=c(40),p=c(18),f=c(1242),v=c(1238),N=c(1241),g=c(269),k=c(107),y=c(268),w=c(15);var C=Object(k.b)((function(e){return{song:e.song}}),(function(e){return{addSong:function(){return e(g.b.apply(void 0,arguments))}}}))((function(e){var t=e.id,c=e.addSong,a=Object(r.useState)(""),l=Object(s.a)(a,2),o=l[0],j=l[1],d=Object(r.useState)(!1),m=Object(s.a)(d,2),b=m[0],g=m[1],k=Object(r.useState)([]),C=Object(s.a)(k,2),I=C[0],S=C[1],_=Object(r.useState)([]),L=Object(s.a)(_,2),z=L[0],E=L[1],R=Object(r.useState)(1),P=Object(s.a)(R,2),D=P[0],U=P[1],J=Object(r.useState)(20),M=Object(s.a)(J,2),Z=M[0],A=M[1],B=Object(r.useState)(0),F=Object(s.a)(B,2),Q=F[0],V=F[1],Y=Object(r.useState)(!1),q=Object(s.a)(Y,2),G=q[0],H=q[1],K=Object(r.useState)(""),T=Object(s.a)(K,2),W=T[0],X=T[1],$=e.detail;Object(r.useEffect)((function(){return Object(n.a)(i.a.mark((function e(){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.m)({id:t});case 2:200===(c=e.sent).code&&j(c.lrc.lyric.replace(/\[.*?\]|\x20/g,""));case 4:case"end":return e.stop()}}),e)})))(),function(){}}),[t]);var ee=Object(r.useCallback)(function(){var e=Object(n.a)(i.a.mark((function e(c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)({t:1,type:0,id:t,content:c,timestamp:Date.now()});case 2:200===e.sent.code&&(h.x.success({content:"\u8bc4\u8bba\u6210\u529f",duration:2}),ne());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),te=Object(r.useCallback)((function(e){U(e)}),[]),ce=Object(r.useCallback)((function(e){A(e)}),[]),ne=function(){var e=Object(n.a)(i.a.mark((function e(){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(!0),e.next=3,Object(u.w)({id:t,limit:Z,offset:(D-1)*Z,timestamp:Date.now()});case 3:200===(c=e.sent).code&&(H(!1),V(c.total),S(c.comments),E(c.hotComments));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return ne(),function(){}}),[t,Z,D]);var se=function(){var e=Object(n.a)(i.a.mark((function e(c,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.b)({id:t,cid:c,t:n?0:1,type:0,timestamp:Date.now()});case 2:200===e.sent.code?(n?h.x.success({content:"\u53d6\u6d88\u8d5e\u6210\u529f",duration:2}):h.x.success({content:"\u8d5e\u6210\u529f",duration:2}),ne()):h.x.error({content:"\u64cd\u4f5c\u5931\u8d25"});case 4:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),ae=function(){var e=Object(n.a)(i.a.mark((function e(c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.a)({t:0,type:0,id:t,commentId:c,timestamp:Date.now()});case 2:200===e.sent.code&&(h.x.success({content:"\u5220\u9664\u6210\u529f",duration:2}),ne());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(n.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.n)({id:t});case 2:200===(n=e.sent).code&&(X(n.data[0].url),c(n.data[0].url),localStorage.setItem("song_url",JSON.stringify(n.data[0].url)));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(n.a)(i.a.mark((function e(){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.y)({id:t});case 2:c=e.sent,console.log(c);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:O.a["detail-left"],children:[Object(w.jsxs)("div",{className:"top-content",children:[Object(w.jsxs)("div",{className:"img",children:[Object(w.jsx)("img",{src:$.al.picUrl,alt:""}),Object(w.jsx)("span",{className:"img-mask"})]}),Object(w.jsxs)("div",{className:"list-content",children:[Object(w.jsxs)("div",{className:"list-name",children:[Object(w.jsx)("i",{className:"icon-song"}),$.name]}),Object(w.jsx)("div",{className:"sub-name",children:$.alia.map((function(e,t){return Object(w.jsx)("span",{className:"sub-item",children:e},t)}))}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("span",{className:"label",children:"\u6b4c\u624b\uff1a"}),Object(w.jsx)("div",{className:"wrap",children:$.ar.map((function(e,t){return 0===t?Object(w.jsx)(x.b,{className:"item",to:"/find/artist?id="+e.id,children:e.name},e.id):Object(w.jsxs)("span",{className:"divider",children:["/",Object(w.jsx)(x.b,{className:"item",to:"/find/artist?id="+e.id,children:e.name})]},e.id)}))})]}),Object(w.jsxs)("div",{className:"row",children:[Object(w.jsx)("span",{className:"label",children:"\u6240\u5c5e\u4e13\u8f91\uff1a"}),Object(w.jsx)("div",{className:"wrap",children:Object(w.jsx)(x.b,{className:"item",to:"/find/album?id="+$.al.id,children:$.al.name})})]}),Object(w.jsx)("div",{className:"operates",children:Object(w.jsxs)(h.r,{children:[Object(w.jsx)(h.c,{onClick:ie,type:"danger",icon:Object(w.jsx)(p.Q,{}),children:"\u64ad\u653e"}),Object(w.jsx)(h.c,{type:"tertiary",icon:Object(w.jsx)(p.R,{}),children:"\u6536\u85cf"}),Object(w.jsx)(h.c,{type:"tertiary",icon:Object(w.jsx)(p.E,{}),children:"\u5206\u4eab"}),Object(w.jsx)(h.c,{onClick:re,type:"tertiary",icon:Object(w.jsx)(p.x,{}),children:"\u4e0b\u8f7d"}),Object(w.jsxs)(h.c,{type:"tertiary",icon:Object(w.jsx)(p.r,{}),onClick:function(){y.a.goAnchor("#comment")},children:["(",Q,")"]})]})}),Object(w.jsx)("div",{className:"lyric",children:b?o:o.split("\n").slice(0,16).join("\n")}),Object(w.jsxs)("div",{className:"arrow",onClick:function(){g(!b)},children:[Object(w.jsx)("span",{className:"text",children:b?"\u6536\u8d77":"\u5c55\u5f00"}),b?Object(w.jsx)(p.n,{}):Object(w.jsx)(p.k,{})]})]})]}),Object(w.jsx)(v.a,{commitNum:Q,commit:ee,commitLength:140}),Object(w.jsx)(f.a,{like:se,del:ae,total:Q,comments:I,hotComments:z}),Q>0?Object(w.jsx)("div",{className:"pagination-wrapper",children:Object(w.jsx)(h.k,{total:Q,currentPage:D,onPageChange:te,showSizeChanger:!0,pageSize:Z,pageSizeOpts:[20,30,50],onPageSizeChange:ce})}):null,Object(w.jsx)(h.s,{spinning:G,tip:"loading...",size:"large",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"9999"}}),Object(w.jsx)("audio",{autoPlay:!0,src:W,children:"audio"})]})})),I=c(1325),S=c.n(I);function _(e){var t=e.id,c=Object(r.useState)([]),a=Object(s.a)(c,2),l=a[0],o=a[1],j=Object(r.useState)([]),d=Object(s.a)(j,2),m=d[0],b=d[1];return Object(r.useEffect)((function(){return Object(n.a)(i.a.mark((function e(){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.u)({id:t});case 2:200===(c=e.sent).code&&o(c.playlists);case 4:case"end":return e.stop()}}),e)})))(),function(){}}),[]),Object(r.useEffect)((function(){return Object(n.a)(i.a.mark((function e(){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.v)({id:t});case 2:200===(c=e.sent).code&&b(c.songs);case 4:case"end":return e.stop()}}),e)})))(),function(){}}),[]),Object(w.jsxs)("div",{className:S.a["detail-right"],children:[l&&l.length?Object(w.jsxs)("div",{className:"play-simi",children:[Object(w.jsx)("h3",{className:"title",children:"\u5305\u542b\u8fd9\u9996\u6b4c\u7684\u6b4c\u5355"}),Object(w.jsx)("div",{className:"simi-content",children:l.map((function(e){return Object(w.jsxs)("div",{className:"simi-item",children:[Object(w.jsx)("img",{src:e.coverImgUrl,alt:""}),Object(w.jsxs)("div",{className:"desc",children:[Object(w.jsx)(x.b,{to:"/find/playlist/detail?id="+e.id,className:"sub-title",children:e.name}),Object(w.jsxs)("span",{className:"text",children:["by ",Object(w.jsx)(x.b,{to:"/user/home?uid="+e.creator.userId,className:"name",children:e.creator.nickname})]})]})]},e.id)}))})]}):null,m&&m.length?Object(w.jsxs)("div",{className:"play-simi",children:[Object(w.jsx)("h3",{className:"title",children:"\u76f8\u4f3c\u6b4c\u66f2"}),Object(w.jsx)("div",{className:"simi-content",children:m.map((function(e){return Object(w.jsxs)("div",{className:"simi-item song-item",children:[Object(w.jsxs)("div",{className:"content",children:[Object(w.jsx)(x.b,{to:"/find/song?id="+e.id,className:"song-name",children:e.name}),Object(w.jsx)("div",{className:"artists",children:e.artists.map((function(e,t){return 0===t?Object(w.jsx)(x.b,{className:"item",to:"/find/artist?id="+e.id,children:e.name},e.id):Object(w.jsxs)("span",{className:"divider",children:["/",Object(w.jsx)(x.b,{className:"item",to:"/find/artist?id="+e.id,children:e.name})]},e.id)}))})]}),Object(w.jsx)(p.P,{style:{color:"#999"}}),Object(w.jsx)(p.R,{style:{color:"#999"}})]},e.id)}))})]}):null]})}var L=c(1243);function z(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),c=t[0],a=t[1],l=Object(j.h)(),d=m.a.parse(l.search).id;return Object(r.useEffect)((function(){return Object(n.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.x)({ids:d});case 2:200===(t=e.sent).code&&a(t.songs);case 4:case"end":return e.stop()}}),e)})))(),function(){}}),[d]),Object(w.jsx)(w.Fragment,{children:c?Object(w.jsxs)("div",{className:o.a["song-detail"],children:[Object(w.jsx)("div",{className:"left",children:Object(w.jsx)(C,{detail:c[0],id:d})}),Object(w.jsx)("div",{className:"right",children:Object(w.jsx)(_,{id:d})})]}):Object(w.jsx)(h.f,{image:Object(w.jsx)(L.IllustrationConstruction,{style:{width:150,height:150}}),darkModeImage:Object(w.jsx)(L.IllustrationConstructionDark,{style:{width:150,height:150}}),description:"\u4fe1\u606f\u4e22\u5931",style:{padding:30}})})}}}]);
//# sourceMappingURL=22.53c621ec.chunk.js.map