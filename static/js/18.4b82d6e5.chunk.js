(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[18],{1021:function(e,t,c){"use strict";var s=c(19),n=c(1),a=c(1022),i=c.n(a),r=c(27),l=c(105),d=c(5);t.a=Object(l.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,c=Object(n.useState)(""),a=Object(s.a)(c,2),l=a[0],j=a[1];return Object(d.jsxs)("div",{className:i.a.commit,id:"comment",children:[Object(d.jsxs)("div",{className:"commit-header",children:[Object(d.jsx)("h3",{className:"title",children:"\u8bc4\u8bba"}),Object(d.jsxs)("span",{className:"nums",children:["\u5171",e.commitNum,"\u6761\u8bc4\u8bba"]})]}),Object(d.jsxs)("div",{className:"commit-wrap",children:[Object(d.jsx)("img",{src:t?t.avatarUrl:"http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50",alt:""}),Object(d.jsxs)("div",{className:"commit-content",children:[Object(d.jsx)(r.x,{placeholder:"\u8bc4\u8bba",value:l,onChange:function(e){j(e)},maxCount:e.commitLength}),Object(d.jsx)("div",{className:"commit-opearte",children:Object(d.jsx)(r.c,{onClick:function(){t?l?(j(""),e.commit&&e.commit(l)):r.y.warning({content:"\u8bf7\u5148\u8f93\u5165\u5185\u5bb9\u54e6\ud83d\ude0a",duration:2}):r.y.warning("\u8bf7\u5148\u767b\u5f55\u518d\u8bc4\u8bba\u54e6")},children:"\u8bc4\u8bba"})})]})]})]})}))},1022:function(e,t,c){e.exports={commit:"index_commit__msAm_"}},1023:function(e,t,c){e.exports={"comment-list":"commitList_comment-list__JzpVv"}},1024:function(e,t,c){"use strict";c.d(t,"a",(function(){return r})),c.d(t,"b",(function(){return d}));var s=c(15),n=c.n(s),a=c(23),i=c(26);function r(e){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(n.a.mark((function e(t){var c,s,a,r,l,d,j;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.t,s=t.type,a=t.id,r=t.content,l=t.commentId,d=t.timestamp,e.next=3,i.a.post("/comment",{t:c,type:s,id:a,content:r,commentId:l,timestamp:d});case 3:return j=e.sent,e.abrupt("return",j);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(n.a.mark((function e(t){var c,s,a,r,l,d,j;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.id,s=t.cid,a=t.t,r=t.type,l=t.threadId,d=t.timestamp,e.next=3,i.a.post("/comment/like",{id:c,cid:s,t:a,type:r,threadId:l,timestamp:d});case 3:return j=e.sent,e.abrupt("return",j);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1025:function(e,t,c){"use strict";c.d(t,"a",(function(){return o}));c(1);var s=c(1023),n=c.n(s),a=c(997),i=c.n(a),r=c(42),l=c(14),d=c(105),j=c(5);var m=Object(d.b)((function(e){return{user:e.user}}))((function(e){var t=e.c,c=e.user;return Object(j.jsxs)("li",{className:"comment-item",children:[Object(j.jsx)(r.b,{to:"/user/home?uid="+t.user.userId,children:Object(j.jsx)(i.a,{height:50,debounce:500,placeholder:Object(j.jsx)("img",{width:50,height:50,src:"http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50"}),children:Object(j.jsx)("img",{src:t.user.avatarUrl,alt:""})})}),Object(j.jsxs)("div",{className:"comment-desc",children:[Object(j.jsxs)("p",{className:"comment-content",children:[Object(j.jsx)(r.b,{className:"name",to:"/user/home?uid="+t.user.userId,children:t.user.nickname}),Object(j.jsx)("span",{className:"divider",children:":"}),Object(j.jsx)("span",{className:"content",children:t.content})]}),t.beReplied.length?t.beReplied.map((function(e){return Object(j.jsx)("div",{className:"beReplied",children:Object(j.jsxs)("p",{className:"comment-content",children:[Object(j.jsx)(r.b,{className:"name",to:"/user/home?uid="+e.user.userId,children:e.user.nickname}),Object(j.jsx)("span",{className:"divider",children:":"}),Object(j.jsx)("span",{className:"content",children:e.content})]})},e.beRepliedCommentId)})):null,Object(j.jsxs)("div",{className:"comment-points",children:[Object(j.jsx)("span",{className:"time",children:t.timeStr}),Object(j.jsxs)("div",{className:"operate",children:[c&&t.user.userId===c.userId?Object(j.jsxs)("span",{className:"del-wrap",children:[Object(j.jsx)("span",{className:"reback",onClick:function(){e.delComment&&e.delComment(t.commentId)},children:"\u5220\u9664"}),Object(j.jsx)("span",{className:"line",children:"|"})]}):null,Object(j.jsxs)("span",{className:t.liked?"like liked":"like",onClick:function(){e.commentLike&&e.commentLike(t.commentId,t.liked)},children:[Object(j.jsx)(l.I,{}),t.likedCount?Object(j.jsxs)("span",{className:"num",children:["(",t.likedCount,")"]}):null]}),Object(j.jsx)("span",{className:"line",children:"|"}),Object(j.jsx)("span",{className:"reback",children:"\u56de\u590d"})]})]})]})]},t.commentId)}));function o(e){var t=e.total,c=e.comments,s=e.hotComments,a=function(t,c){e.like&&e.like(t,c)},i=function(t){e.del&&e.del(t)};return Object(j.jsxs)("div",{className:n.a["comment-list"],children:[s&&s.length?Object(j.jsxs)("ul",{className:"comment",children:[Object(j.jsx)("li",{className:"header",children:Object(j.jsx)("h3",{className:"title",children:"\u7cbe\u5f69\u8bc4\u8bba"})}),s.map((function(e){return Object(j.jsx)(m,{commentLike:a,delComment:i,c:e},e.commentId)}))]}):null,Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),c&&c.length?Object(j.jsxs)("ul",{className:"comment",children:[Object(j.jsx)("li",{className:"header",children:Object(j.jsxs)("h3",{className:"title",children:["\u6700\u65b0\u8bc4\u8bba(",t,")"]})}),c.map((function(e){return Object(j.jsx)(m,{commentLike:a,delComment:i,c:e},e.commentId)}))]}):null]})}},1027:function(e,t,c){"use strict";var s=c(15),n=c.n(s),a=c(23),i=(c(1),c(1028),c(90)),r=c(42),l=c(104),d=c(105),j=c(106),m=c(165),o=c(5);t.a=Object(d.b)((function(e){return{song:e.song}}),(function(e){return{addSong:function(){return e(j.e.apply(void 0,arguments))},setCurSongId:function(){return e(m.b.apply(void 0,arguments))}}}))((function(e){var t=e.item,c=e.index,s=e.showAlbum,d=e.addSong,j=e.setCurSongId,m=function(){var e=Object(a.a)(n.a.mark((function e(t){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.m)({id:t});case 2:c=e.sent,j(t),200===c.code&&c.data[0].url&&d(c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("li",{className:i.a.isEven(c)?"table-item even":"table-item",children:[Object(o.jsxs)("div",{className:"play-num bd",children:[Object(o.jsx)("span",{className:"num",children:c}),Object(o.jsx)("i",{className:"icon-play",onClick:function(){m(t.id)}})]}),Object(o.jsxs)("div",{className:"title bd ellipsis-1",children:[Object(o.jsx)(r.b,{to:"/find/song?id="+t.id,children:t.name}),t.alia&&t.alia.length?Object(o.jsxs)("span",{className:"mv-name",children:["-",t.alia.map((function(e){return e}))]}):null,t.mv?Object(o.jsx)(r.b,{className:"icon-mv",to:"/find/mv?id="+t.mv}):null]}),Object(o.jsxs)("div",{className:"duration bd",children:[Object(o.jsx)("span",{className:"time",children:i.a.formatTime(t.dt)}),Object(o.jsxs)("div",{className:"btns",children:[Object(o.jsx)("i",{className:"icon icon-add"}),Object(o.jsx)("i",{className:"icon icon-fav"}),Object(o.jsx)("i",{className:"icon icon-share"}),Object(o.jsx)("i",{className:"icon icon-down"})]})]}),Object(o.jsx)("div",{className:"name bd ellipsis-1",children:t.ar.map((function(e,t){return Object(o.jsx)(r.b,{to:"/find/artist?id="+e.id,children:0===t?e.name:"/".concat(e.name)},e.id+t)}))}),s?Object(o.jsx)("div",{className:"album bd ellipsis-1",children:Object(o.jsx)(r.b,{to:"/find/album?id="+t.al.id,children:t.al.name})}):null]})}))},1028:function(e,t,c){},1107:function(e,t,c){e.exports={"album-detail":"index_album-detail__1XSbp"}},1108:function(e,t,c){e.exports={"detail-left":"detailLeft_detail-left__20_9r"}},1109:function(e,t,c){e.exports={"detail-right":"detailRight_detail-right__Qdz_L"}},1162:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return z}));var s=c(15),n=c.n(s),a=c(23),i=c(19),r=c(1),l=c(50),d=c(1107),j=c.n(d),m=c(1108),o=c.n(m),u=c(104),b=c(1024),h=c(90),O=c(42),x=c(27),p=c(14),f=c(1026),N=c(1021),v=c(1025),g=c(1027),y=c(5);var w=function(e){var t=e.id,c=e.albumDetail,s=e.songs,l=Object(r.useState)(!1),d=Object(i.a)(l,2),j=d[0],m=d[1],w=Object(r.useState)(1),k=Object(i.a)(w,2),C=k[0],I=k[1],S=Object(r.useState)(20),_=Object(i.a)(S,2),z=_[0],L=_[1],D=Object(r.useState)(0),R=Object(i.a)(D,2),A=R[0],E=R[1],P=Object(r.useState)([]),T=Object(i.a)(P,2),U=T[0],J=T[1],F=Object(r.useState)([]),M=Object(i.a)(F,2),Q=M[0],V=M[1],X=Object(r.useState)(!1),q=Object(i.a)(X,2),B=q[0],G=q[1],H=function(){var e=Object(a.a)(n.a.mark((function e(c){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.a)({t:1,type:3,content:c,id:t});case 2:200===e.sent.code&&(x.y.success({content:"\u8bc4\u8bba\u6210\u529f",duration:2}),K());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(a.a)(n.a.mark((function e(){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.next=3,Object(u.c)({id:t,limit:z,offset:(C-1)*z,timestamp:Date.now()});case 3:200===(c=e.sent).code&&(G(!1),E(c.total),J(c.comments),V(c.hotComments));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return K(),function(){}}),[t,C,z]),Object(y.jsxs)("div",{className:o.a["detail-left"],children:[c?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"top-content",children:[Object(y.jsxs)("div",{className:"img",children:[Object(y.jsx)("img",{src:c.picUrl,alt:""}),Object(y.jsx)("span",{className:"album-mask"})]}),Object(y.jsxs)("div",{className:"list-content",children:[Object(y.jsxs)("div",{className:"list-name",children:[Object(y.jsx)("i",{className:"icon-album"}),c.name]}),Object(y.jsx)("div",{className:"sub-name",children:c.alias.map((function(e,t){return Object(y.jsx)("span",{className:"sub-item",children:e},t)}))}),Object(y.jsxs)("div",{className:"row",children:[Object(y.jsx)("span",{className:"label",children:"\u6b4c\u624b\uff1a"}),Object(y.jsx)("div",{className:"wrap",children:c.artists.map((function(e,t){return 0===t?Object(y.jsx)(O.b,{className:"item",to:"/find/artist?id="+e.id,children:e.name},e.id):Object(y.jsxs)("span",{className:"divider",children:["/",Object(y.jsx)(O.b,{className:"item",to:"/find/artist?id="+e.id,children:e.name})]},e.id)}))})]}),Object(y.jsxs)("div",{className:"row",children:[Object(y.jsx)("span",{className:"label",children:"\u53d1\u884c\u65f6\u95f4\uff1a"}),Object(y.jsx)("div",{className:"wrap",children:h.a.formatDate(c.publishTime)})]}),Object(y.jsxs)("div",{className:"row",children:[Object(y.jsx)("span",{className:"label",children:"\u53d1\u884c\u516c\u53f8\uff1a"}),Object(y.jsx)("div",{className:"wrap",children:c.company})]}),Object(y.jsx)("div",{className:"operates",children:Object(y.jsxs)(x.s,{children:[Object(y.jsx)(x.c,{icon:Object(y.jsx)(p.N,{}),children:"\u64ad\u653e"}),Object(y.jsx)(x.c,{type:"tertiary",icon:Object(y.jsx)(p.O,{}),children:"\u6536\u85cf"}),Object(y.jsxs)(x.c,{type:"tertiary",icon:Object(y.jsx)(p.C,{}),children:["(",c.info.shareCount,")"]}),Object(y.jsx)(x.c,{type:"tertiary",icon:Object(y.jsx)(p.v,{}),children:"\u4e0b\u8f7d"}),Object(y.jsxs)(x.c,{type:"tertiary",icon:Object(y.jsx)(p.r,{}),onClick:function(){h.a.goAnchor("#comment")},children:["(",c.info.commentCount,")"]})]})})]})]}),c.description?Object(y.jsxs)("div",{className:"desc",children:[Object(y.jsx)("h3",{className:"title",children:"\u4e13\u8f91\u4ecb\u7ecd\uff1a"}),Object(y.jsx)("p",{className:"content",children:j?c.description.split("\n\n").join("\n"):c.description.split("\n\n").join("\n").split("\n").splice(0,5).join("\n")+"..."}),Object(y.jsxs)("div",{className:"arrow",onClick:function(){m(!j)},children:[Object(y.jsx)("span",{className:"text",children:j?"\u6536\u8d77":"\u5c55\u5f00"}),j?Object(y.jsx)(p.n,{}):Object(y.jsx)(p.k,{})]})]}):null]}):Object(y.jsx)(x.f,{image:Object(y.jsx)(f.a,{style:{width:150,height:150}}),darkModeImage:Object(y.jsx)(f.b,{style:{width:150,height:150}}),description:"\u4fe1\u606f\u4e22\u5931",style:{padding:30}}),Object(y.jsxs)("div",{className:"music-list",children:[Object(y.jsxs)("div",{className:"list-header",children:[Object(y.jsx)("h3",{className:"title",children:"\u6b4c\u66f2\u5217\u8868"}),Object(y.jsxs)("span",{className:"total",children:[c.size,"\u9996\u6b4c"]})]}),Object(y.jsxs)("ul",{className:"list-wrap",children:[Object(y.jsxs)("li",{className:"table-header",children:[Object(y.jsx)("div",{className:"play-num"}),Object(y.jsx)("div",{className:"title bd",children:"\u6b4c\u66f2\u6807\u9898"}),Object(y.jsx)("div",{className:"duration bd",children:"\u65f6\u957f"}),Object(y.jsx)("div",{className:"name bd",children:"\u6b4c\u624b"})]}),s.map((function(e,t){return Object(y.jsx)(g.a,{index:t+1,item:e},e.id)}))]})]}),Object(y.jsx)(N.a,{commitNum:A,commit:H,commitLength:140}),Object(y.jsx)(v.a,{total:A,comments:U,hotComments:Q}),A>0?Object(y.jsx)("div",{className:"pagination-wrapper",children:Object(y.jsx)(x.k,{total:A,currentPage:C,onPageChange:function(e){I(e)},showSizeChanger:!0,pageSize:z,pageSizeOpts:[20,30,50],onPageSizeChange:function(e){L(e)}})}):null,Object(y.jsx)(x.t,{spinning:B,tip:"loading...",size:"large",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"9999"}})]})},k=c(1109),C=c.n(k);function I(e){e.id;var t=e.artistId,c=Object(r.useState)([]),s=Object(i.a)(c,2),l=s[0],d=s[1];return Object(r.useEffect)((function(){return Object(a.a)(n.a.mark((function e(){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.e)({id:t});case 2:200===(c=e.sent).code&&d(c.hotAlbums.splice(0,5));case 4:case"end":return e.stop()}}),e)})))(),function(){}}),[t]),Object(y.jsx)("div",{className:C.a["detail-right"],children:Object(y.jsxs)("div",{className:"play-hot",children:[Object(y.jsxs)("div",{className:"header",children:[Object(y.jsx)("h3",{className:"title",children:"Ta\u7684\u5176\u4ed6\u70ed\u95e8\u4e13\u8f91"}),Object(y.jsx)(O.b,{className:"toPage",to:"/find/artist?id="+t,children:"\u5168\u90e8>"})]}),Object(y.jsx)("div",{className:"hot-content",children:l&&l.length?l.map((function(e){return Object(y.jsxs)("div",{className:"hot-item",children:[Object(y.jsx)(O.b,{to:"/find/album?id="+e.id,children:Object(y.jsx)("img",{src:e.picUrl,alt:""})}),Object(y.jsxs)("div",{className:"desc",children:[Object(y.jsx)(O.b,{to:"/find/album?id="+e.id,className:"sub-title",children:e.name}),Object(y.jsx)("span",{className:"text",children:h.a.formatDate(e.publishTime)})]})]},e.id)})):null})]})})}var S=c(1e3),_=c.n(S);function z(){var e=Object(l.h)(),t=_.a.parse(e.search).id,c=Object(r.useState)([]),s=Object(i.a)(c,2),d=s[0],m=s[1],o=Object(r.useState)(null),b=Object(i.a)(o,2),h=b[0],O=b[1];return Object(r.useEffect)((function(){return Object(a.a)(n.a.mark((function e(){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)({id:t});case 2:200===(c=e.sent).code&&(O(c.album),m(c.songs));case 4:case"end":return e.stop()}}),e)})))(),function(){}}),[t]),Object(y.jsx)(y.Fragment,{children:h?Object(y.jsxs)("div",{className:j.a["album-detail"],children:[Object(y.jsx)("div",{className:"left",children:Object(y.jsx)(w,{songs:d,albumDetail:h,id:t})}),Object(y.jsx)("div",{className:"right",children:Object(y.jsx)(I,{id:t,artistId:h.artist.id})})]}):null})}}}]);
//# sourceMappingURL=18.4b82d6e5.chunk.js.map