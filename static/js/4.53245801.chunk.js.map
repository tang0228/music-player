{"version":3,"sources":["components/Commit/index.jsx","components/Commit/index.module.less","components/CommitList/commitList.module.less","services/comment.js","components/CommitList/Item.jsx","components/CommitList/CommitList.jsx","pages/Find/modules/playListDetail/TableItem.jsx","pages/Find/modules/playListDetail/DetailLeft.jsx","pages/Find/modules/playListDetail/detailLeft.module.less"],"names":["connect","state","user","props","useState","commitText","setCommitText","className","style","commit","id","commitNum","src","avatarUrl","alt","placeholder","value","onChange","val","maxCount","commitLength","onClick","Toast","warning","content","duration","module","exports","comment","a","t","type","commentId","timestamp","ins","post","res","likeComment","cid","threadId","c","to","userId","height","debounce","width","nickname","beReplied","length","map","be","beRepliedCommentId","timeStr","delComment","liked","commentLike","likedCount","CommitList","total","comments","hotComments","like","del","song","dispatch","addSong","addSongAction","setCurSongId","setCurSongIdAction","item","index","showAlbum","play","getMusicPlayUrl","code","data","url","utils","isEven","name","alia","mv","formatTime","dt","ar","e","i","al","DetailLeft","setComments","setHotComments","page","setPage","limit","setLimit","setTotal","loading","setLoading","open","setOpen","detail","playListCommit","Date","now","success","getComments","getPlayListCommit","offset","useEffect","error","coverImgUrl","creator","avatarDetail","identityIconUrl","formatDate","createTime","icon","subscribedCount","shareCount","goAnchor","commentCount","tags","description","split","splice","join","trackCount","playCount","tracks","currentPage","onPageChange","showSizeChanger","pageSize","pageSizeOpts","onPageSizeChange","spinning","tip","size","position","top","left","transform","zIndex"],"mappings":"mLA0EeA,iBAlES,SAACC,GACxB,MAAO,CACNC,KAAMD,EAAMC,QAgECF,EA5Df,SAAgBG,GACf,IAAMD,EAAOC,EAAMD,KADG,EAGcE,mBAAS,IAHvB,mBAGfC,EAHe,KAGHC,EAHG,KA8BtB,OACC,sBAAKC,UAAWC,IAAMC,OAAQC,GAAG,UAAjC,UACC,sBAAKH,UAAU,gBAAf,UACC,oBAAIA,UAAU,QAAd,0BACA,uBAAMA,UAAU,OAAhB,mBAAyBJ,EAAMQ,UAA/B,2BAED,sBAAKJ,UAAU,cAAf,UACC,qBAAKK,IAAKV,EAAOA,EAAKW,UAAY,gFAAiFC,IAAI,KACvH,sBAAKP,UAAU,iBAAf,UACC,cAAC,IAAD,CAAUQ,YAAY,eAAKC,MAAOX,EAAYY,SA/BxB,SAACC,GAC1BZ,EAAcY,IA8BgEC,SAAUhB,EAAMiB,eAC3F,qBAAKb,UAAU,iBAAf,SAEC,cAAC,IAAD,CAAQc,QA5BE,WACTnB,EAIAG,GAQLC,EAAc,IACdH,EAAMM,QAAUN,EAAMM,OAAOJ,IAR5BiB,IAAMC,QAAQ,CACbC,QAAS,yDACTC,SAAU,IANXH,IAAMC,QAAQ,qDA0BX,yC,qBCvDNG,EAAOC,QAAU,CAAC,OAAS,wB,qBCA3BD,EAAOC,QAAU,CAAC,eAAe,mC,2IC0B1B,SAAeC,EAAtB,kC,4CAAO,yCAAAC,EAAA,6DAAwBC,EAAxB,EAAwBA,EAAGC,EAA3B,EAA2BA,KAAMrB,EAAjC,EAAiCA,GAAIc,EAArC,EAAqCA,QAASQ,EAA9C,EAA8CA,UAAWC,EAAzD,EAAyDA,UAAzD,SACeC,IAAIC,KAAK,WAAY,CAC/BL,IAAGC,OAAMrB,KAAIc,UAASQ,YAAWC,cAFtC,cACGG,EADH,yBAIIA,GAJJ,4C,sBAQA,SAAeC,EAAtB,kC,4CAAO,yCAAAR,EAAA,6DAA4BnB,EAA5B,EAA4BA,GAAI4B,EAAhC,EAAgCA,IAAKR,EAArC,EAAqCA,EAAGC,EAAxC,EAAwCA,KAAMQ,EAA9C,EAA8CA,SAAUN,EAAxD,EAAwDA,UAAxD,SACeC,IAAIC,KAAK,gBAAiB,CACxCzB,KAAI4B,MAAKR,IAAGC,OAAMQ,WAAUN,cAF7B,cACGG,EADH,yBAIIA,GAJJ,4C,0KCuCQpC,mBApES,SAACC,GACxB,MAAO,CACNC,KAAMD,EAAMC,QAkECF,EA9Df,SAAcG,GAAQ,IACbqC,EAAYrC,EAAZqC,EAAGtC,EAASC,EAATD,KACX,OACC,qBAAIK,UAAU,eAAd,UACC,cAAC,IAAD,CAAMkC,GAAI,kBAAoBD,EAAEtC,KAAKwC,OAArC,SACC,cAAC,IAAD,CAAUC,OAAQ,GAAIC,SAAU,IAAK7B,YAAa,qBAAK8B,MAAO,GAAIF,OAAQ,GAAI/B,IAAI,kFAAlF,SACC,qBAAKA,IAAK4B,EAAEtC,KAAKW,UAAWC,IAAI,SAGlC,sBAAKP,UAAU,eAAf,UACC,oBAAGA,UAAU,kBAAb,UACC,cAAC,IAAD,CAAMA,UAAU,OAAOkC,GAAI,kBAAoBD,EAAEtC,KAAKwC,OAAtD,SACEF,EAAEtC,KAAK4C,WAET,sBAAMvC,UAAU,UAAhB,eACA,sBAAMA,UAAU,UAAhB,SAA2BiC,EAAEhB,aAG7BgB,EAAEO,UAAUC,OACVR,EAAEO,UAAUE,KAAI,SAACC,GAAD,OACjB,qBAAiC3C,UAAU,YAA3C,SACC,oBAAGA,UAAU,kBAAb,UACC,cAAC,IAAD,CACCA,UAAU,OACVkC,GAAI,kBAAoBS,EAAGhD,KAAKwC,OAFjC,SAIEQ,EAAGhD,KAAK4C,WAEV,sBAAMvC,UAAU,UAAhB,eACA,sBAAMA,UAAU,UAAhB,SAA2B2C,EAAG1B,cATtB0B,EAAGC,uBAaZ,KACH,sBAAK5C,UAAU,iBAAf,UACC,sBAAMA,UAAU,OAAhB,SAAwBiC,EAAEY,UAC1B,sBAAK7C,UAAU,UAAf,UAEEL,GAAQsC,EAAEtC,KAAKwC,SAAWxC,EAAKwC,OAAS,uBAAMnC,UAAU,WAAhB,UACvC,sBAAMA,UAAU,SAASc,QAAS,WACjClB,EAAMkD,YAAclD,EAAMkD,WAAWb,EAAER,YADxC,0BAGA,sBAAMzB,UAAU,OAAhB,kBACS,KAEX,uBAAMA,UAAWiC,EAAEc,MAAQ,aAAe,OAAQjC,QAAS,WAC1DlB,EAAMoD,aAAepD,EAAMoD,YAAYf,EAAER,UAAWQ,EAAEc,QADvD,UAGC,cAAC,IAAD,IACCd,EAAEgB,WACF,uBAAMjD,UAAU,MAAhB,cAAwBiC,EAAEgB,WAA1B,OACG,QAEL,sBAAMjD,UAAU,OAAhB,eACA,sBAAMA,UAAU,SAAhB,qCAnD8BiC,EAAER,cCXvB,SAASyB,EAAWtD,GAAQ,IACjCuD,EAAiCvD,EAAjCuD,MAAOC,EAA0BxD,EAA1BwD,SAAUC,EAAgBzD,EAAhByD,YACnBL,EAAc,SAACjB,EAAKgB,GACtBnD,EAAM0D,MAAQ1D,EAAM0D,KAAKvB,EAAKgB,IAE5BD,EAAa,SAACf,GAChBnC,EAAM2D,KAAO3D,EAAM2D,IAAIxB,IAE3B,OACE,sBAAK/B,UAAWC,IAAM,gBAAtB,UACGoD,GAAeA,EAAYZ,OAC1B,qBAAIzC,UAAU,UAAd,UACE,oBAAIA,UAAU,SAAd,SACE,oBAAIA,UAAU,QAAd,wCAEDqD,EAAYX,KAAI,SAACT,GAAD,OACf,cAAC,EAAD,CAAMe,YAAaA,EAAaF,WAAYA,EAA8Bb,EAAGA,GAAhBA,EAAER,iBAGjE,KACJ,uBACA,uBACC2B,GAAYA,EAASX,OACpB,qBAAIzC,UAAU,UAAd,UACE,oBAAIA,UAAU,SAAd,SACE,qBAAIA,UAAU,QAAd,sCAA4BmD,EAA5B,SAEDC,EAASV,KAAI,SAACT,GAAD,OACZ,cAAC,EAAD,CAAMe,YAAaA,EAAaF,WAAYA,EAA8Bb,EAAGA,GAAhBA,EAAER,iBAGjE,U,yIC6BKhC,iBAvDS,SAACC,GACvB,MAAO,CACL8D,KAAM9D,EAAM8D,SAGW,SAACC,GAC1B,MAAO,CACLC,QAAS,kBAAaD,EAASE,IAAa,WAAb,eAC/BC,aAAc,kBAAaH,EAASI,IAAkB,WAAlB,kBA+CzBpE,EA5Cf,SAAmBG,GAAQ,IACjBkE,EAAkDlE,EAAlDkE,KAAMC,EAA4CnE,EAA5CmE,MAAOC,EAAqCpE,EAArCoE,UAAWN,EAA0B9D,EAA1B8D,QAASE,EAAiBhE,EAAjBgE,aAEnCK,EAAI,uCAAG,WAAO9D,GAAP,eAAAmB,EAAA,sEACO4C,YAAgB,CAAE/D,OADzB,OACL0B,EADK,OAEX+B,EAAazD,GACI,MAAb0B,EAAIsC,MAAgBtC,EAAIuC,KAAK,GAAGC,KAClCX,EAAQ7B,EAAIuC,MAJH,2CAAH,sDAOV,OACE,qBAAIpE,UAAWsE,IAAMC,OAAOR,GAAS,kBAAoB,aAAzD,UACE,sBAAK/D,UAAU,cAAf,UACE,sBAAMA,UAAU,MAAhB,SAAuB+D,IACvB,mBAAG/D,UAAU,YAAYc,QAAS,WAChCmD,EAAKH,EAAK3D,UAGd,sBAAKH,UAAU,sBAAf,UACE,cAAC,IAAD,CAAMkC,GAAI,iBAAmB4B,EAAK3D,GAAlC,SAAuC2D,EAAKU,OAC3CV,EAAKW,MAAQX,EAAKW,KAAKhC,OACtB,uBAAMzC,UAAU,UAAhB,cAA4B8D,EAAKW,KAAK/B,KAAI,SAAApB,GAAC,OAAIA,QAC7C,KACHwC,EAAKY,GAAK,cAAC,IAAD,CAAM1E,UAAU,UAAUkC,GAAI,eAAiB4B,EAAKY,KAAc,QAE/E,sBAAK1E,UAAU,cAAf,UACE,sBAAMA,UAAU,OAAhB,SAAwBsE,IAAMK,WAAWb,EAAKc,MAC9C,sBAAK5E,UAAU,OAAf,UACE,mBAAGA,UAAU,kBACb,mBAAGA,UAAU,kBACb,mBAAGA,UAAU,oBACb,mBAAGA,UAAU,yBAGjB,qBAAKA,UAAU,qBAAf,SACG8D,EAAKe,GAAGnC,KAAI,SAACoC,EAAGC,GAAJ,OACX,cAAC,IAAD,CAAM7C,GAAI,mBAAqB4C,EAAE3E,GAAjC,SAA2D,IAAN4E,EAAUD,EAAEN,KAAZ,WAAuBM,EAAEN,OAApCM,EAAE3E,GAAK4E,QAGpDf,EAAY,qBAAKhE,UAAU,sBAAf,SAAqC,cAAC,IAAD,CAAMkC,GAAI,kBAAoB4B,EAAKkB,GAAG7E,GAAtC,SAA2C2D,EAAKkB,GAAGR,SAAqB,Y,gNC0MjHS,IAhPf,SAAoBrF,GAAQ,IAAD,EACMC,mBAAS,IADf,mBACnBuD,EADmB,KACT8B,EADS,OAEYrF,mBAAS,IAFrB,mBAEnBwD,EAFmB,KAEN8B,EAFM,OAGFtF,mBAAS,GAHP,mBAGnBuF,EAHmB,KAGbC,EAHa,OAIAxF,mBAAS,IAJT,mBAInByF,EAJmB,KAIZC,EAJY,OAKA1F,mBAAS,GALT,mBAKnBsD,EALmB,KAKZqC,EALY,OAMI3F,oBAAS,GANb,mBAMnB4F,EANmB,KAMVC,EANU,OAOF7F,oBAAS,GAPP,mBAOnB8F,EAPmB,KAObC,EAPa,KAQlBC,EAAejG,EAAfiG,OAAQ1F,EAAOP,EAAPO,GAEV2F,EAAc,uCAAG,WAAOnF,GAAP,SAAAW,EAAA,sEACJD,YAAQ,CACzBE,EAAG,EACHC,KAAM,EACNrB,GAAIA,EACJc,QAASN,EACTe,UAAWqE,KAAKC,QANK,OAQL,MARK,OAQd7B,OACPpD,IAAMkF,QAAQ,CACbhF,QAAS,2BACTC,SAAU,IAEXgF,KAbqB,2CAAH,sDAwBdA,EAAW,uCAAG,4BAAA5E,EAAA,6DACnBoE,GAAW,GADQ,SAEDS,YAAkB,CACnChG,GAAIA,EACJmF,QACAc,QAAShB,EAAO,GAAKE,EACrB5D,UAAWqE,KAAKC,QANE,OAQF,OANXnE,EAFa,QAQXsC,OACPqB,EAAS3D,EAAIsB,OACb+B,EAAYrD,EAAIuB,UAChB+B,EAAetD,EAAIwB,aACnBqC,GAAW,IAZO,2CAAH,qDAgBjBW,qBAAU,WAET,OADAH,IACO,eACL,CAAC/F,EAAImF,EAAOF,IAGf,IAAM9B,EAAI,uCAAG,WAAOvB,EAAKgB,GAAZ,SAAAzB,EAAA,sEACMQ,YAAY,CAC7B3B,KACA4B,MACAR,EAAGwB,EAAQ,EAAI,EACfvB,KAAM,EACNE,UAAWqE,KAAKC,QANL,OAQK,MARL,OAQJ7B,MACHpB,EACHhC,IAAMkF,QAAQ,CACbhF,QAAS,iCACTC,SAAU,IAGXH,IAAMkF,QAAQ,CACbhF,QAAS,qBACTC,SAAU,IAGZgF,KAEAnF,IAAMuF,MAAM,CACXrF,QAAS,6BAvBC,2CAAH,wDA6BJsC,EAAG,uCAAG,WAAOxB,GAAP,SAAAT,EAAA,sEACOD,YAAQ,CACzBE,EAAG,EACHC,KAAM,EACNrB,GAAIA,EACJsB,UAAWM,EACXL,UAAWqE,KAAKC,QANN,OAQM,MARN,OAQH7B,OACPpD,IAAMkF,QAAQ,CACbhF,QAAS,2BACTC,SAAU,IAEXgF,KAbU,2CAAH,sDAgBT,OACC,sBAAKlG,UAAWC,IAAM,eAAtB,UACC,sBAAKD,UAAU,cAAf,UACC,qBAAKA,UAAU,MAAf,SACC,sBAAKA,UAAU,UAAf,UACC,qBAAKK,IAAKwF,EAAOU,YAAahG,IAAI,KAClC,sBAAMP,UAAU,cAIlB,sBAAKA,UAAU,eAAf,UACC,sBAAKA,UAAU,YAAf,UACC,mBAAGA,UAAU,kBACZ6F,EAAOrB,QAET,sBAAKxE,UAAU,cAAf,UACC,cAAC,IAAD,CAAMkC,GAAI,kBAAoB2D,EAAOW,QAAQrE,OAA7C,SACC,qBAAK9B,IAAKwF,EAAOW,QAAQlG,UAAWC,IAAI,OAEzC,cAAC,IAAD,CACCP,UAAU,YACVkC,GAAI,kBAAoB2D,EAAOW,QAAQrE,OAFxC,SAIE0D,EAAOW,QAAQjE,WAEhBsD,EAAOW,QAAQC,cACfZ,EAAOW,QAAQC,aAAaC,gBAC5B,qBACC1G,UAAU,OACVK,IAAKwF,EAAOW,QAAQC,aAAaC,gBACjCnG,IAAI,KAEF,KAEJ,sBAAKP,UAAU,cAAf,UACEsE,IAAMqC,WAAWd,EAAOe,YAD1B,sBAID,qBAAK5G,UAAU,WAAf,SACC,eAAC,IAAD,WAEC,eAAC,IAAD,CAAQwB,KAAK,WAAWqF,KAAM,cAAC,IAAD,IAA9B,cACGhB,EAAOiB,gBADV,OAGA,eAAC,IAAD,CAAQtF,KAAK,WAAWqF,KAAM,cAAC,IAAD,IAA9B,cACGhB,EAAOkB,WADV,OAGA,cAAC,IAAD,CAAQvF,KAAK,WAAWqF,KAAM,cAAC,IAAD,IAA9B,0BAGA,eAAC,IAAD,CAAQrF,KAAK,WAAWqF,KAAM,cAAC,IAAD,IAAiB/F,QAAS,WACvDwD,IAAM0C,SAAS,aADhB,cAGGnB,EAAOoB,aAHV,YAODpB,EAAOqB,KAAKzE,OAAS,sBAAKzC,UAAU,OAAf,+BAErB,cAAC,IAAD,UACE6F,EAAOqB,KAAKxE,KAAI,SAACnB,GAAD,OAChB,cAAC,IAAD,UACC,cAAC,IAAD,CAAMvB,UAAU,OAAOkC,GAAI,sBAAwBX,EAAnD,SACEA,KAFOA,WAOJ,KAERsE,EAAOsB,YAAc,sBAAKnH,UAAU,OAAf,+BAChB2F,EAAOE,EAAOsB,YAActB,EAAOsB,YAAYC,MAAM,MAAMC,OAAO,EAAG,GAAGC,KAAK,MAAQ,MACzF,sBAAKtH,UAAU,QAAQc,QAAS,WAC/B8E,GAASD,IADV,UAGC,sBAAM3F,UAAU,OAAhB,SAAwB2F,EAAO,eAAO,iBACrCA,EAAO,cAAC,IAAD,IAAoB,cAAC,IAAD,UAErB,WAKZ,sBAAK3F,UAAU,aAAf,UACC,sBAAKA,UAAU,cAAf,UACC,oBAAIA,UAAU,QAAd,sCACA,uBAAMA,UAAU,QAAhB,UAAyB6F,EAAO0B,WAAhC,kBACA,uBAAMvH,UAAU,WAAhB,+BACI,sBAAMA,UAAU,MAAhB,SAAuB6F,EAAO2B,YADlC,eAID,qBAAIxH,UAAU,YAAd,UACC,qBAAIA,UAAU,eAAd,UACC,qBAAKA,UAAU,aACf,qBAAKA,UAAU,WAAf,sCACA,qBAAKA,UAAU,cAAf,0BACA,qBAAKA,UAAU,UAAf,0BACA,qBAAKA,UAAU,WAAf,6BAEA6F,EAAO4B,OAAO/E,KAAI,SAACnB,EAAGwD,GAAJ,OAClB,cAAC,IAAD,CAAWf,WAAW,EAAiBD,MAAOgB,EAAI,EAAGjB,KAAMvC,GAA1BA,EAAEpB,aAItC,cAAC,IAAD,CACCC,UAAWyF,EAAOoB,aAClB/G,OAAQ4F,EACRjF,aAAc,MAEf,cAAC,IAAD,CAAYyC,KAAMA,EAAMC,IAAKA,EAAKJ,MAAOA,EAAOC,SAAUA,EAAUC,YAAaA,IAChFF,EAAQ,EACR,qBAAKnD,UAAU,qBAAf,SACC,cAAC,IAAD,CACCmD,MAAOA,EACPuE,YAAatC,EACbuC,aA7LoB,SAACvC,GACzBC,EAAQD,IA6LJwC,iBAAe,EACfC,SAAUvC,EACVwC,aAAc,CAAC,GAAI,GAAI,IACvBC,iBA7LqB,SAACzC,GAC1BC,EAASD,QA+LJ,KACJ,cAAC,IAAD,CACC0C,SAAUvC,EACVwC,IAAI,aACJC,KAAK,QACLjI,MAAO,CACNkI,SAAU,QACVC,IAAK,MACLC,KAAM,MACNC,UAAW,wBACXC,OAAQ,e,qBC7PbpH,EAAOC,QAAU,CAAC,cAAc","file":"static/js/4.53245801.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport style from \"./index.module.less\";\r\nimport { TextArea, Button, Toast } from \"@douyinfe/semi-ui\";\r\n// import Picker from \"emoji-picker-react\";\r\nimport { connect } from \"react-redux\";\r\n// import { IconImage } from \"@douyinfe/semi-icons\";\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t};\r\n};\r\n\r\nfunction Commit(props) {\r\n\tconst user = props.user;\r\n\t// const [showEmoji, setShowEmoji] = useState(false);\r\n\tconst [commitText, setCommitText] = useState(\"\");// 评论内容\r\n\t// const onEmojiClick = (e, emo) => {\r\n\t//   //   setEmoText(emo.emoji);\r\n\t//   //   setCommitText(emo.names[0] + commitText);\r\n\t// };\r\n\tconst handleValueChange = (val) => {\r\n\t\tsetCommitText(val);\r\n\t}\r\n\t// const showEmojiSelect = () => {\r\n\t//   setShowEmoji(!showEmoji);\r\n\t// };\r\n\tconst commit = () => {\r\n\t\tif (!user) {\r\n\t\t\tToast.warning(\"请先登录再评论哦\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!commitText) {\r\n\t\t\tToast.warning({\r\n\t\t\t\tcontent: \"请先输入内容哦😊\",\r\n\t\t\t\tduration: 2\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 回传给父组件\r\n\t\tsetCommitText(\"\"); // 输入框清空\r\n\t\tprops.commit && props.commit(commitText)\r\n\t}\r\n\treturn (\r\n\t\t<div className={style.commit} id=\"comment\">\r\n\t\t\t<div className=\"commit-header\">\r\n\t\t\t\t<h3 className=\"title\">评论</h3>\r\n\t\t\t\t<span className=\"nums\">共{props.commitNum}条评论</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"commit-wrap\">\r\n\t\t\t\t<img src={user ? user.avatarUrl : 'http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50'} alt=\"\" />\r\n\t\t\t\t<div className=\"commit-content\">\r\n\t\t\t\t\t<TextArea placeholder=\"评论\" value={commitText} onChange={handleValueChange} maxCount={props.commitLength}></TextArea>\r\n\t\t\t\t\t<div className=\"commit-opearte\">\r\n\t\t\t\t\t\t{/* <IconImage onClick={showEmojiSelect} /> */}\r\n\t\t\t\t\t\t<Button onClick={commit}>评论</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* {showEmoji ? (\r\n            <div className=\"emoji-box\">\r\n              <Picker onEmojiClick={onEmojiClick} />\r\n            </div>\r\n          ) : null} */}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nCommit.propTypes = {\r\n\tcommitNum: PropTypes.number, // 评论数量\r\n\tcommitLength: PropTypes.number, // 评论内容限制长度\r\n};\r\n\r\nexport default connect(mapStateToProps)(Commit);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commit\":\"index_commit__msAm_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comment-list\":\"commitList_comment-list__JzpVv\"};","import ins from \"./request\";\r\n\r\n/**\r\n * 新版获取评论列表\r\n * 资源 id, 如歌曲 id,mv id\r\n * type: 数字  0: 歌曲 1: mv 2: 歌单 3: 专辑 4: 电台 5: 视频 6: 动态\r\n * pageNo:分页参数,第 N 页,默认为 1\r\n * pageSize:分页参数,每页多少条数据,默认 20\r\n * sortType: 排序方式, 1:按推荐排序, 2:按热度排序, 3:按时间排序\r\n * cursor: 当sortType为 3 时且页数不是第一页时需传入,值为上一条数据的 time\r\n */\r\nexport async function getCommentList({id, type, pageNo = 1, pageSize = 20, timestamp}) {\r\n    const res = await ins.get(\"/comment/new\", {\r\n        params: {\r\n            id,\r\n            type, \r\n            pageNo, \r\n            pageSize,\r\n            timestamp\r\n        }\r\n    });\r\n    return res;\r\n};\r\n\r\n/**\r\n * 发送（回复）评论\r\n */\r\nexport async function comment({t, type, id, content, commentId, timestamp}) {\r\n    const res = await ins.post(\"/comment\", {\r\n            t, type, id, content, commentId, timestamp\r\n    });\r\n    return res;\r\n};\r\n\r\n// 给评论点赞\r\nexport async function likeComment({id, cid, t, type, threadId, timestamp }) {\r\n    const res = await ins.post(\"/comment/like\", {\r\n        id, cid, t, type, threadId, timestamp\r\n    });\r\n    return res;\r\n};\r\n","import React from \"react\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { IconLikeThumb } from \"@douyinfe/semi-icons\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user\r\n\t}\r\n};\r\n\r\nfunction Item(props) {\r\n\tconst { c, user } = props;\r\n\treturn (\r\n\t\t<li className=\"comment-item\" key={c.commentId}>\r\n\t\t\t<Link to={\"/user/home?uid=\" + c.user.userId}>\r\n\t\t\t\t<LazyLoad height={50} debounce={500} placeholder={<img width={50} height={50} src=\"http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50\" />}>\r\n\t\t\t\t\t<img src={c.user.avatarUrl} alt=\"\" />\r\n\t\t\t\t</LazyLoad>\r\n\t\t\t</Link>\r\n\t\t\t<div className=\"comment-desc\">\r\n\t\t\t\t<p className=\"comment-content\">\r\n\t\t\t\t\t<Link className=\"name\" to={\"/user/home?uid=\" + c.user.userId}>\r\n\t\t\t\t\t\t{c.user.nickname}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<span className=\"divider\">:</span>\r\n\t\t\t\t\t<span className=\"content\">{c.content}</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t{/* 回复评论列表 */}\r\n\t\t\t\t{c.beReplied.length\r\n\t\t\t\t\t? c.beReplied.map((be) => (\r\n\t\t\t\t\t\t<div key={be.beRepliedCommentId} className=\"beReplied\">\r\n\t\t\t\t\t\t\t<p className=\"comment-content\">\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tclassName=\"name\"\r\n\t\t\t\t\t\t\t\t\tto={\"/user/home?uid=\" + be.user.userId}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{be.user.nickname}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<span className=\"divider\">:</span>\r\n\t\t\t\t\t\t\t\t<span className=\"content\">{be.content}</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))\r\n\t\t\t\t\t: null}\r\n\t\t\t\t<div className=\"comment-points\">\r\n\t\t\t\t\t<span className=\"time\">{c.timeStr}</span>\r\n\t\t\t\t\t<div className=\"operate\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tuser && c.user.userId === user.userId ? <span className=\"del-wrap\">\r\n\t\t\t\t\t\t\t\t<span className=\"reback\" onClick={() => {\r\n\t\t\t\t\t\t\t\t\tprops.delComment && props.delComment(c.commentId)\r\n\t\t\t\t\t\t\t\t}}>删除</span>\r\n\t\t\t\t\t\t\t\t<span className=\"line\">|</span>\r\n\t\t\t\t\t\t\t</span> : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<span className={c.liked ? 'like liked' : 'like'} onClick={() => {\r\n\t\t\t\t\t\t\tprops.commentLike && props.commentLike(c.commentId, c.liked)\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<IconLikeThumb />\r\n\t\t\t\t\t\t\t{c.likedCount ? (\r\n\t\t\t\t\t\t\t\t<span className=\"num\">({c.likedCount})</span>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"line\">|</span>\r\n\t\t\t\t\t\t<span className=\"reback\">回复</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default connect(mapStateToProps)(Item);\r\n","import React from \"react\";\r\nimport style from \"./commitList.module.less\";\r\nimport Item from \"./Item\"\r\n\r\nexport default function CommitList(props) {\r\n  const { total, comments, hotComments } = props;\r\n  const commentLike = (cid, liked) => {\r\n      props.like && props.like(cid, liked);\r\n  };\r\n  const delComment = (cid) => {\r\n      props.del && props.del(cid);\r\n  };\r\n  return (\r\n    <div className={style[\"comment-list\"]}>\r\n      {hotComments && hotComments.length ? (\r\n        <ul className=\"comment\">\r\n          <li className=\"header\">\r\n            <h3 className=\"title\">精彩评论</h3>\r\n          </li>\r\n          {hotComments.map((c) => (\r\n            <Item commentLike={commentLike} delComment={delComment} key={c.commentId} c={c}></Item>\r\n          ))}\r\n        </ul>\r\n      ) : null}\r\n      <br />\r\n      <br />\r\n      {comments && comments.length ? (\r\n        <ul className=\"comment\">\r\n          <li className=\"header\">\r\n            <h3 className=\"title\">最新评论({total})</h3>\r\n          </li>\r\n          {comments.map((c) => (\r\n            <Item commentLike={commentLike} delComment={delComment} key={c.commentId} c={c}></Item>\r\n          ))}\r\n        </ul>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./tableItem.less\";\r\nimport utils from \"../../../../utils\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getMusicPlayUrl } from \"../../../../services/apis\";\r\nimport { connect } from \"react-redux\";\r\nimport { addSongAction } from \"../../../../store/actions/song\";\r\nimport { setCurSongIdAction } from \"@/store/actions/curSongId\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    song: state.song\r\n  }\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    addSong: (...args) => dispatch(addSongAction(...args)),\r\n    setCurSongId: (...args) => dispatch(setCurSongIdAction(...args))\r\n  };\r\n};\r\nfunction TableItem(props) {\r\n  const { item, index, showAlbum, addSong, setCurSongId } = props;\r\n  // 播放歌曲\r\n  const play = async (id) => {\r\n    const res = await getMusicPlayUrl({ id });\r\n    setCurSongId(id);\r\n    if (res.code === 200 && res.data[0].url) {\r\n      addSong(res.data);\r\n    }\r\n  };\r\n  return (\r\n    <li className={utils.isEven(index) ? \"table-item even\" : \"table-item\"}>\r\n      <div className=\"play-num bd\">\r\n        <span className=\"num\">{index}</span>\r\n        <i className=\"icon-play\" onClick={() => {\r\n          play(item.id)\r\n        }}></i>\r\n      </div>\r\n      <div className=\"title bd ellipsis-1\">\r\n        <Link to={'/find/song?id=' + item.id}>{item.name}</Link>\r\n        {item.alia && item.alia.length ?\r\n          <span className=\"mv-name\">-{item.alia.map(a => a)}</span>\r\n          : null}\r\n        {item.mv ? <Link className=\"icon-mv\" to={'/find/mv?id=' + item.mv}></Link> : null}\r\n      </div>\r\n      <div className=\"duration bd\">\r\n        <span className=\"time\">{utils.formatTime(item.dt)}</span>\r\n        <div className=\"btns\">\r\n          <i className=\"icon icon-add\"></i>\r\n          <i className=\"icon icon-fav\"></i>\r\n          <i className=\"icon icon-share\"></i>\r\n          <i className=\"icon icon-down\"></i>\r\n        </div>\r\n      </div>\r\n      <div className=\"name bd ellipsis-1\">\r\n        {item.ar.map((e, i) => (\r\n          <Link to={'/find/artist?id=' + e.id} key={e.id + i}>{i === 0 ? e.name : `/${e.name}`}</Link>\r\n        ))}\r\n      </div>\r\n      {showAlbum ? <div className=\"album bd ellipsis-1\"><Link to={'/find/album?id=' + item.al.id}>{item.al.name}</Link></div> : null}\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(TableItem);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport style from \"./detailLeft.module.less\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Tag, Button, Space, Toast, Pagination, Spin } from \"@douyinfe/semi-ui\";\r\nimport {\r\n\t//   IconPlayCircle,\r\n\tIconPlus,\r\n\tIconForward,\r\n\tIconDownload,\r\n\tIconComment,\r\n\tIconChevronUp,\r\n\tIconChevronDown,\r\n} from \"@douyinfe/semi-icons\";\r\nimport utils from \"../../../../utils\";\r\nimport TableItem from \"./TableItem\";\r\nimport Commit from \"../../../../components/Commit\";\r\nimport CommitList from \"../../../../components/CommitList/CommitList\";\r\nimport { comment, likeComment } from \"../../../../services/comment\";\r\nimport { getPlayListCommit } from \"../../../../services/apis\";\r\n\r\n\r\nfunction DetailLeft(props) {\r\n\tconst [comments, setComments] = useState([]); // 评论列表\r\n\tconst [hotComments, setHotComments] = useState([]); // 热门评论列表\r\n\tconst [page, setPage] = useState(1); // 评论列表\r\n\tconst [limit, setLimit] = useState(20); // 页容量\r\n\tconst [total, setTotal] = useState(0); // 总评论数\r\n\tconst [loading, setLoading] = useState(false); // loading\r\n\tconst [open, setOpen] = useState(false);// 是否展开\r\n\tconst { detail, id } = props;\r\n\t// 提交评论\r\n\tconst playListCommit = async (val) => {\r\n\t\tconst res = await comment({\r\n\t\t\tt: 1,\r\n\t\t\ttype: 2,\r\n\t\t\tid: id,\r\n\t\t\tcontent: val,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tToast.success({\r\n\t\t\t\tcontent: \"评论成功\",\r\n\t\t\t\tduration: 2,\r\n\t\t\t});\r\n\t\t\tgetComments();\r\n\t\t}\r\n\t};\r\n\t// 页码变化\r\n\tconst handlePageChange = (page) => {\r\n\t\tsetPage(page);\r\n\t};\r\n\t// 页容量变化\r\n\tconst handleLimitChange = (limit) => {\r\n\t\tsetLimit(limit);\r\n\t};\r\n\tconst getComments = async () => {\r\n\t\tsetLoading(true);\r\n\t\tconst res = await getPlayListCommit({\r\n\t\t\tid: id,\r\n\t\t\tlimit,\r\n\t\t\toffset: (page - 1) * limit,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tsetTotal(res.total);\r\n\t\t\tsetComments(res.comments);\r\n\t\t\tsetHotComments(res.hotComments);\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t}\r\n\t// 获取评论列表\r\n\tuseEffect(() => {\r\n\t\tgetComments();\r\n\t\treturn () => { };\r\n\t}, [id, limit, page]);\r\n\r\n\t// 点赞评论\r\n\tconst like = async (cid, liked) => {\r\n\t\tconst res = await likeComment({\r\n\t\t\tid,\r\n\t\t\tcid,\r\n\t\t\tt: liked ? 0 : 1,\r\n\t\t\ttype: 2,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tif (liked) {\r\n\t\t\t\tToast.success({\r\n\t\t\t\t\tcontent: \"取消赞成功\",\r\n\t\t\t\t\tduration: 2,\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tToast.success({\r\n\t\t\t\t\tcontent: \"赞成功\",\r\n\t\t\t\t\tduration: 2,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tgetComments();\r\n\t\t} else {\r\n\t\t\tToast.error({\r\n\t\t\t\tcontent: \"操作失败\"\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\r\n\t// 删除评论\r\n\tconst del = async (cid) => {\r\n\t\tconst res = await comment({\r\n\t\t\tt: 0,\r\n\t\t\ttype: 2,\r\n\t\t\tid: id,\r\n\t\t\tcommentId: cid,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tToast.success({\r\n\t\t\t\tcontent: \"删除成功\",\r\n\t\t\t\tduration: 2,\r\n\t\t\t});\r\n\t\t\tgetComments();\r\n\t\t}\r\n\t}\r\n\treturn (\r\n\t\t<div className={style[\"detail-left\"]}>\r\n\t\t\t<div className=\"top-content\">\r\n\t\t\t\t<div className=\"img\">\r\n\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t<img src={detail.coverImgUrl} alt=\"\" />\r\n\t\t\t\t\t\t<span className=\"mask\"></span>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"list-content\">\r\n\t\t\t\t\t<div className=\"list-name\">\r\n\t\t\t\t\t\t<i className=\"icon-playlist\"></i>\r\n\t\t\t\t\t\t{detail.name}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"create-desc\">\r\n\t\t\t\t\t\t<Link to={\"/user/home?uid=\" + detail.creator.userId}>\r\n\t\t\t\t\t\t\t<img src={detail.creator.avatarUrl} alt=\"\" />\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tclassName=\"nick-name\"\r\n\t\t\t\t\t\t\tto={\"/user/home?uid=\" + detail.creator.userId}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{detail.creator.nickname}\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t{detail.creator.avatarDetail &&\r\n\t\t\t\t\t\t\tdetail.creator.avatarDetail.identityIconUrl ? (\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tclassName=\"icon\"\r\n\t\t\t\t\t\t\t\tsrc={detail.creator.avatarDetail.identityIconUrl}\r\n\t\t\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t<div className=\"create-time\">\r\n\t\t\t\t\t\t\t{utils.formatDate(detail.createTime)} 创建\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"operates\">\r\n\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t{/* <Button icon={<IconPlayCircle />}>播放</Button> */}\r\n\t\t\t\t\t\t\t<Button type=\"tertiary\" icon={<IconPlus />}>\r\n\t\t\t\t\t\t\t\t({detail.subscribedCount})\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button type=\"tertiary\" icon={<IconForward />}>\r\n\t\t\t\t\t\t\t\t({detail.shareCount})\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button type=\"tertiary\" icon={<IconDownload />}>\r\n\t\t\t\t\t\t\t\t下载\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button type=\"tertiary\" icon={<IconComment />} onClick={() => {\r\n\t\t\t\t\t\t\t\tutils.goAnchor(\"#comment\");\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t({detail.commentCount})\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{detail.tags.length ? <div className=\"tags\">\r\n\t\t\t\t\t\t标签：\r\n\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t{detail.tags.map((t) => (\r\n\t\t\t\t\t\t\t\t<Tag key={t}>\r\n\t\t\t\t\t\t\t\t\t<Link className=\"item\" to={\"/find/playlist?cat=\" + t}>\r\n\t\t\t\t\t\t\t\t\t\t{t}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</Tag>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t</div> : null}\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdetail.description ? <div className=\"desc\">\r\n\t\t\t\t\t\t\t介绍：{open ? detail.description : detail.description.split(\"\\n\").splice(0, 5).join(\"\\n\") + '...'}\r\n\t\t\t\t\t\t\t<div className=\"arrow\" onClick={() => {\r\n\t\t\t\t\t\t\t\tsetOpen(!open);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<span className=\"text\">{open ? '收起' : '展开'}</span>\r\n\t\t\t\t\t\t\t\t{open ? <IconChevronUp /> : <IconChevronDown />}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div> : null\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"music-list\">\r\n\t\t\t\t<div className=\"list-header\">\r\n\t\t\t\t\t<h3 className=\"title\">歌曲列表</h3>\r\n\t\t\t\t\t<span className=\"total\">{detail.trackCount}首歌</span>\r\n\t\t\t\t\t<span className=\"play-num\">\r\n\t\t\t\t\t\t播放：<span className=\"num\">{detail.playCount}</span>次\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul className=\"list-wrap\">\r\n\t\t\t\t\t<li className=\"table-header\">\r\n\t\t\t\t\t\t<div className=\"play-num\"></div>\r\n\t\t\t\t\t\t<div className=\"title bd\">歌曲标题</div>\r\n\t\t\t\t\t\t<div className=\"duration bd\">时长</div>\r\n\t\t\t\t\t\t<div className=\"name bd\">歌手</div>\r\n\t\t\t\t\t\t<div className=\"album bd\">专辑</div>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t{detail.tracks.map((t, i) => (\r\n\t\t\t\t\t\t<TableItem showAlbum={true} key={t.id} index={i + 1} item={t} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<Commit\r\n\t\t\t\tcommitNum={detail.commentCount}\r\n\t\t\t\tcommit={playListCommit}\r\n\t\t\t\tcommitLength={140}\r\n\t\t\t/>\r\n\t\t\t<CommitList like={like} del={del} total={total} comments={comments} hotComments={hotComments} />\r\n\t\t\t{total > 0 ? (\r\n\t\t\t\t<div className=\"pagination-wrapper\">\r\n\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\ttotal={total}\r\n\t\t\t\t\t\tcurrentPage={page}\r\n\t\t\t\t\t\tonPageChange={handlePageChange}\r\n\t\t\t\t\t\tshowSizeChanger\r\n\t\t\t\t\t\tpageSize={limit}\r\n\t\t\t\t\t\tpageSizeOpts={[20, 30, 50]}\r\n\t\t\t\t\t\tonPageSizeChange={handleLimitChange}\r\n\t\t\t\t\t></Pagination>\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t\t<Spin\r\n\t\t\t\tspinning={loading}\r\n\t\t\t\ttip=\"loading...\"\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\ttop: \"50%\",\r\n\t\t\t\t\tleft: \"50%\",\r\n\t\t\t\t\ttransform: \"translate(-50%, -50%)\",\r\n\t\t\t\t\tzIndex: \"9999\",\r\n\t\t\t\t}}\r\n\t\t\t></Spin>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default DetailLeft;\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detail-left\":\"detailLeft_detail-left__1r5FU\"};"],"sourceRoot":""}