{"version":3,"sources":["components/Commit/index.jsx","components/Commit/index.module.less","components/CommitList/commitList.module.less","services/comment.js","components/CommitList/Item.jsx","components/CommitList/CommitList.jsx","pages/Song/SongDetail/index.module.less","pages/Song/SongDetail/detailLeft.module.less","pages/Song/SongDetail/detailRight.module.less","pages/Song/SongDetail/DetailLeft.jsx","pages/Song/SongDetail/DetailRight.jsx","pages/Song/SongDetail/index.jsx"],"names":["connect","state","user","props","useState","commitText","setCommitText","className","style","commit","id","commitNum","src","avatarUrl","alt","placeholder","value","onChange","val","maxCount","commitLength","onClick","Toast","warning","content","duration","module","exports","comment","a","t","type","commentId","timestamp","ins","post","res","likeComment","cid","threadId","c","to","userId","height","debounce","width","nickname","beReplied","length","map","be","beRepliedCommentId","timeStr","delComment","liked","commentLike","likedCount","CommitList","total","comments","hotComments","like","del","song","dispatch","addSong","addSongAction","setCurSongId","setCurSongIdAction","lyric","setLyric","open","setOpen","setComments","setHotComments","page","setPage","limit","setLimit","setTotal","loading","setLoading","detail","useEffect","getLyric","code","lrc","replace","songCommit","Date","now","success","getComments","getSongComment","offset","error","play","getMusicPlayUrl","data","url","download","getSongUrl","al","picUrl","name","alia","item","index","ar","i","icon","utils","goAnchor","split","slice","join","Commit","currentPage","onPageChange","showSizeChanger","pageSize","pageSizeOpts","onPageSizeChange","spinning","tip","size","position","top","left","transform","zIndex","DetailRight","simiList","setSimiList","simiSongs","setSimiSongs","getSimiPlayList","playlists","getSimiSong","songs","l","coverImgUrl","creator","s","artists","color","SongDetail","songDetail","setSongDetail","location","useLocation","ids","qs","parse","search","getSongDetail","image","darkModeImage","description","padding"],"mappings":"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","file":"static/js/22.7a469c68.chunk.js","sourcesContent":["import React, { useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport style from \"./index.module.less\";\r\nimport { TextArea, Button, Toast } from \"@douyinfe/semi-ui\";\r\n// import Picker from \"emoji-picker-react\";\r\nimport { connect } from \"react-redux\";\r\n// import { IconImage } from \"@douyinfe/semi-icons\";\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user,\r\n\t};\r\n};\r\n\r\nfunction Commit(props) {\r\n\tconst user = props.user;\r\n\t// const [showEmoji, setShowEmoji] = useState(false);\r\n\tconst [commitText, setCommitText] = useState(\"\");// 评论内容\r\n\t// const onEmojiClick = (e, emo) => {\r\n\t//   //   setEmoText(emo.emoji);\r\n\t//   //   setCommitText(emo.names[0] + commitText);\r\n\t// };\r\n\tconst handleValueChange = (val) => {\r\n\t\tsetCommitText(val);\r\n\t}\r\n\t// const showEmojiSelect = () => {\r\n\t//   setShowEmoji(!showEmoji);\r\n\t// };\r\n\tconst commit = () => {\r\n\t\tif (!user) {\r\n\t\t\tToast.warning(\"请先登录再评论哦\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!commitText) {\r\n\t\t\tToast.warning({\r\n\t\t\t\tcontent: \"请先输入内容哦😊\",\r\n\t\t\t\tduration: 2\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 回传给父组件\r\n\t\tsetCommitText(\"\"); // 输入框清空\r\n\t\tprops.commit && props.commit(commitText)\r\n\t}\r\n\treturn (\r\n\t\t<div className={style.commit} id=\"comment\">\r\n\t\t\t<div className=\"commit-header\">\r\n\t\t\t\t<h3 className=\"title\">评论</h3>\r\n\t\t\t\t<span className=\"nums\">共{props.commitNum}条评论</span>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"commit-wrap\">\r\n\t\t\t\t<img src={user ? user.avatarUrl : 'http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50'} alt=\"\" />\r\n\t\t\t\t<div className=\"commit-content\">\r\n\t\t\t\t\t<TextArea placeholder=\"评论\" value={commitText} onChange={handleValueChange} maxCount={props.commitLength}></TextArea>\r\n\t\t\t\t\t<div className=\"commit-opearte\">\r\n\t\t\t\t\t\t{/* <IconImage onClick={showEmojiSelect} /> */}\r\n\t\t\t\t\t\t<Button onClick={commit}>评论</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{/* {showEmoji ? (\r\n            <div className=\"emoji-box\">\r\n              <Picker onEmojiClick={onEmojiClick} />\r\n            </div>\r\n          ) : null} */}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nCommit.propTypes = {\r\n\tcommitNum: PropTypes.number, // 评论数量\r\n\tcommitLength: PropTypes.number, // 评论内容限制长度\r\n};\r\n\r\nexport default connect(mapStateToProps)(Commit);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commit\":\"index_commit__msAm_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comment-list\":\"commitList_comment-list__JzpVv\"};","import ins from \"./request\";\r\n\r\n/**\r\n * 新版获取评论列表\r\n * 资源 id, 如歌曲 id,mv id\r\n * type: 数字  0: 歌曲 1: mv 2: 歌单 3: 专辑 4: 电台 5: 视频 6: 动态\r\n * pageNo:分页参数,第 N 页,默认为 1\r\n * pageSize:分页参数,每页多少条数据,默认 20\r\n * sortType: 排序方式, 1:按推荐排序, 2:按热度排序, 3:按时间排序\r\n * cursor: 当sortType为 3 时且页数不是第一页时需传入,值为上一条数据的 time\r\n */\r\nexport async function getCommentList({id, type, pageNo = 1, pageSize = 20, timestamp}) {\r\n    const res = await ins.get(\"/comment/new\", {\r\n        params: {\r\n            id,\r\n            type, \r\n            pageNo, \r\n            pageSize,\r\n            timestamp\r\n        }\r\n    });\r\n    return res;\r\n};\r\n\r\n/**\r\n * 发送（回复）评论\r\n */\r\nexport async function comment({t, type, id, content, commentId, timestamp}) {\r\n    const res = await ins.post(\"/comment\", {\r\n            t, type, id, content, commentId, timestamp\r\n    });\r\n    return res;\r\n};\r\n\r\n// 给评论点赞\r\nexport async function likeComment({id, cid, t, type, threadId, timestamp }) {\r\n    const res = await ins.post(\"/comment/like\", {\r\n        id, cid, t, type, threadId, timestamp\r\n    });\r\n    return res;\r\n};\r\n","import React from \"react\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { IconLikeThumb } from \"@douyinfe/semi-icons\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user\r\n\t}\r\n};\r\n\r\nfunction Item(props) {\r\n\tconst { c, user } = props;\r\n\treturn (\r\n\t\t<li className=\"comment-item\" key={c.commentId}>\r\n\t\t\t<Link to={\"/user/home?uid=\" + c.user.userId}>\r\n\t\t\t\t<LazyLoad height={50} debounce={500} placeholder={<img width={50} height={50} src=\"http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50\" />}>\r\n\t\t\t\t\t<img src={c.user.avatarUrl} alt=\"\" />\r\n\t\t\t\t</LazyLoad>\r\n\t\t\t</Link>\r\n\t\t\t<div className=\"comment-desc\">\r\n\t\t\t\t<p className=\"comment-content\">\r\n\t\t\t\t\t<Link className=\"name\" to={\"/user/home?uid=\" + c.user.userId}>\r\n\t\t\t\t\t\t{c.user.nickname}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<span className=\"divider\">:</span>\r\n\t\t\t\t\t<span className=\"content\">{c.content}</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t{/* 回复评论列表 */}\r\n\t\t\t\t{c.beReplied.length\r\n\t\t\t\t\t? c.beReplied.map((be) => (\r\n\t\t\t\t\t\t<div key={be.beRepliedCommentId} className=\"beReplied\">\r\n\t\t\t\t\t\t\t<p className=\"comment-content\">\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tclassName=\"name\"\r\n\t\t\t\t\t\t\t\t\tto={\"/user/home?uid=\" + be.user.userId}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{be.user.nickname}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<span className=\"divider\">:</span>\r\n\t\t\t\t\t\t\t\t<span className=\"content\">{be.content}</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))\r\n\t\t\t\t\t: null}\r\n\t\t\t\t<div className=\"comment-points\">\r\n\t\t\t\t\t<span className=\"time\">{c.timeStr}</span>\r\n\t\t\t\t\t<div className=\"operate\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tuser && c.user.userId === user.userId ? <span className=\"del-wrap\">\r\n\t\t\t\t\t\t\t\t<span className=\"reback\" onClick={() => {\r\n\t\t\t\t\t\t\t\t\tprops.delComment && props.delComment(c.commentId)\r\n\t\t\t\t\t\t\t\t}}>删除</span>\r\n\t\t\t\t\t\t\t\t<span className=\"line\">|</span>\r\n\t\t\t\t\t\t\t</span> : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<span className={c.liked ? 'like liked' : 'like'} onClick={() => {\r\n\t\t\t\t\t\t\tprops.commentLike && props.commentLike(c.commentId, c.liked)\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<IconLikeThumb />\r\n\t\t\t\t\t\t\t{c.likedCount ? (\r\n\t\t\t\t\t\t\t\t<span className=\"num\">({c.likedCount})</span>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"line\">|</span>\r\n\t\t\t\t\t\t<span className=\"reback\">回复</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default connect(mapStateToProps)(Item);\r\n","import React from \"react\";\r\nimport style from \"./commitList.module.less\";\r\nimport Item from \"./Item\"\r\n\r\nexport default function CommitList(props) {\r\n  const { total, comments, hotComments } = props;\r\n  const commentLike = (cid, liked) => {\r\n      props.like && props.like(cid, liked);\r\n  };\r\n  const delComment = (cid) => {\r\n      props.del && props.del(cid);\r\n  };\r\n  return (\r\n    <div className={style[\"comment-list\"]}>\r\n      {hotComments && hotComments.length ? (\r\n        <ul className=\"comment\">\r\n          <li className=\"header\">\r\n            <h3 className=\"title\">精彩评论</h3>\r\n          </li>\r\n          {hotComments.map((c) => (\r\n            <Item commentLike={commentLike} delComment={delComment} key={c.commentId} c={c}></Item>\r\n          ))}\r\n        </ul>\r\n      ) : null}\r\n      <br />\r\n      <br />\r\n      {comments && comments.length ? (\r\n        <ul className=\"comment\">\r\n          <li className=\"header\">\r\n            <h3 className=\"title\">最新评论({total})</h3>\r\n          </li>\r\n          {comments.map((c) => (\r\n            <Item commentLike={commentLike} delComment={delComment} key={c.commentId} c={c}></Item>\r\n          ))}\r\n        </ul>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"song-detail\":\"index_song-detail__2pl16\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detail-left\":\"detailLeft_detail-left__1K67z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detail-right\":\"detailRight_detail-right__hXZyq\"};","import React, { useEffect, useState } from \"react\";\r\nimport style from \"./detailLeft.module.less\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getLyric } from \"../../../services/apis\";\r\nimport { Button, Space, Toast, Pagination, Spin } from \"@douyinfe/semi-ui\";\r\nimport {\r\n\tIconPlayCircle,\r\n\tIconPlus,\r\n\tIconForward,\r\n\tIconDownload,\r\n\tIconComment,\r\n\tIconChevronUp,\r\n\tIconChevronDown,\r\n} from \"@douyinfe/semi-icons\";\r\nimport { getSongComment, getSongUrl, getMusicPlayUrl } from \"../../../services/apis\";\r\nimport CommitList from \"../../../components/CommitList/CommitList\";\r\nimport Commit from \"../../../components/Commit\";\r\nimport { comment, likeComment } from \"../../../services/comment\";\r\nimport { addSongAction } from \"../../../store/actions/song\";\r\nimport { setCurSongIdAction } from \"@/store/actions/curSongId\";\r\nimport { connect } from \"react-redux\";\r\nimport utils from \"../../../utils\";\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tsong: state.song\r\n\t}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\taddSong: (...args) => dispatch(addSongAction(...args)),\r\n\t\tsetCurSongId: (...args) => dispatch(setCurSongIdAction(...args))\r\n\t};\r\n};\r\n\r\nfunction DetailLeft(props) {\r\n\tconst { id, addSong, setCurSongId } = props; // 歌曲ID\r\n\tconst [lyric, setLyric] = useState(\"\"); // 歌词\r\n\tconst [open, setOpen] = useState(false); // 是否展开歌词\r\n\tconst [comments, setComments] = useState([]); // 评论列表\r\n\tconst [hotComments, setHotComments] = useState([]); // 热门评论列表\r\n\tconst [page, setPage] = useState(1); // 评论列表\r\n\tconst [limit, setLimit] = useState(20); // 页容量\r\n\tconst [total, setTotal] = useState(0); // 总评论数\r\n\tconst [loading, setLoading] = useState(false); // loading\r\n\tconst detail = props.detail;\r\n\t// 获取歌词\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tconst res = await getLyric({\r\n\t\t\t\tid\r\n\t\t\t});\r\n\t\t\tif (res.code === 200) {\r\n\t\t\t\tsetLyric(res.lrc.lyric.replace(/\\[.*?\\]|\\x20/g, ''));\r\n\t\t\t}\r\n\t\t})();\r\n\t\treturn () => {\r\n\t\t}\r\n\t}, [id])\r\n\t// 提交评论\r\n\tconst songCommit = async (val) => {\r\n\t\tconst res = await comment({\r\n\t\t\tt: 1,\r\n\t\t\ttype: 0,\r\n\t\t\tid,\r\n\t\t\tcontent: val,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tToast.success({\r\n\t\t\t\tcontent: \"评论成功\",\r\n\t\t\t\tduration: 2,\r\n\t\t\t});\r\n\t\t\tgetComments();\r\n\t\t}\r\n\t};\r\n\t// 页码变化\r\n\tconst handlePageChange = (page) => {\r\n\t\tsetPage(page);\r\n\t};\r\n\t// 页容量变化\r\n\tconst handleLimitChange = (limit) => {\r\n\t\tsetLimit(limit);\r\n\t};\r\n\t// 获取评论\r\n\tconst getComments = async () => {\r\n\t\tsetLoading(true)\r\n\t\tconst res = await getSongComment({\r\n\t\t\tid,\r\n\t\t\tlimit,\r\n\t\t\toffset: (page - 1) * limit,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tsetLoading(false);\r\n\t\t\tsetTotal(res.total);\r\n\t\t\tsetComments(res.comments);\r\n\t\t\tsetHotComments(res.hotComments);\r\n\t\t}\r\n\t}\r\n\t// 获取评论列表\r\n\tuseEffect(() => {\r\n\t\tgetComments();\r\n\t\treturn () => { };\r\n\t}, [id, limit, page]);\r\n\r\n\t// 对评论 点赞/取消\r\n\tconst like = async (cid, liked) => {\r\n\t\tconst res = await likeComment({\r\n\t\t\tid,\r\n\t\t\tcid,\r\n\t\t\tt: liked ? 0 : 1,\r\n\t\t\ttype: 0,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tif (liked) {\r\n\t\t\t\tToast.success({\r\n\t\t\t\t\tcontent: \"取消赞成功\",\r\n\t\t\t\t\tduration: 2,\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tToast.success({\r\n\t\t\t\t\tcontent: \"赞成功\",\r\n\t\t\t\t\tduration: 2,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tgetComments();\r\n\t\t} else {\r\n\t\t\tToast.error({\r\n\t\t\t\tcontent: \"操作失败\",\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\r\n\t// 删除评论\r\n\tconst del = async (cid) => {\r\n\t\tconst res = await comment({\r\n\t\t\tt: 0,\r\n\t\t\ttype: 0,\r\n\t\t\tid: id,\r\n\t\t\tcommentId: cid,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tToast.success({\r\n\t\t\t\tcontent: \"删除成功\",\r\n\t\t\t\tduration: 2,\r\n\t\t\t});\r\n\t\t\tgetComments();\r\n\t\t}\r\n\t};\r\n\r\n\t// 播放歌曲\r\n\tconst play = async () => {\r\n\t\tconst res = await getMusicPlayUrl({ id });\r\n\t\tsetCurSongId(id);\r\n\t\tif (res.code === 200 && res.data[0].url) {\r\n\t\t\taddSong(res.data);\r\n\t\t}\r\n\t};\r\n\r\n\t// 下载歌曲\r\n\tconst download = async () => {\r\n\t\tconst res = await getSongUrl({ id });\r\n\t};\r\n\treturn (\r\n\t\t<div className={style[\"detail-left\"]}>\r\n\t\t\t<div className=\"top-content\">\r\n\t\t\t\t<div className=\"img\">\r\n\t\t\t\t\t<img src={detail.al.picUrl} alt=\"\" />\r\n\t\t\t\t\t<span className=\"img-mask\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"list-content\">\r\n\t\t\t\t\t<div className=\"list-name\">\r\n\t\t\t\t\t\t<i className=\"icon-song\"></i>\r\n\t\t\t\t\t\t{detail.name}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"sub-name\">\r\n\t\t\t\t\t\t{detail.alia.map((item, index) => <span key={index} className=\"sub-item\">{item}</span>)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<span className=\"label\">歌手：</span>\r\n\t\t\t\t\t\t<div className=\"wrap\">\r\n\t\t\t\t\t\t\t{detail.ar.map((a, i) => (i === 0 ? <Link key={a.id} className=\"item\" to={'/find/artist?id=' + a.id}>{a.name}</Link> :\r\n\t\t\t\t\t\t\t\t<span key={a.id} className=\"divider\">/<Link className=\"item\" to={'/find/artist?id=' + a.id}>{a.name}</Link></span>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<span className=\"label\">所属专辑：</span>\r\n\t\t\t\t\t\t<div className=\"wrap\">\r\n\t\t\t\t\t\t\t<Link className=\"item\" to={'/find/album?id=' + detail.al.id}>{detail.al.name}</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"operates\">\r\n\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t<Button onClick={play} type=\"danger\" icon={<IconPlayCircle />}>播放</Button>\r\n\t\t\t\t\t\t\t<Button type=\"tertiary\" icon={<IconPlus />}>收藏</Button>\r\n\t\t\t\t\t\t\t<Button type=\"tertiary\" icon={<IconForward />}>分享</Button>\r\n\t\t\t\t\t\t\t<Button onClick={download} type=\"tertiary\" icon={<IconDownload />}>下载</Button>\r\n\t\t\t\t\t\t\t<Button type=\"tertiary\" icon={<IconComment />} onClick={() => {\r\n\t\t\t\t\t\t\t\tutils.goAnchor(\"#comment\");\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t({total})\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"lyric\">{open ? lyric : lyric.split(\"\\n\").slice(0, 16).join(\"\\n\")}</div>\r\n\t\t\t\t\t<div className=\"arrow\" onClick={() => {\r\n\t\t\t\t\t\tsetOpen(!open);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<span className=\"text\">{open ? '收起' : '展开'}</span>\r\n\t\t\t\t\t\t{open ? <IconChevronUp /> : <IconChevronDown />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<Commit\r\n\t\t\t\tcommitNum={total}\r\n\t\t\t\tcommit={songCommit}\r\n\t\t\t\tcommitLength={140}\r\n\t\t\t/>\r\n\t\t\t<CommitList like={like} del={del} total={total} comments={comments} hotComments={hotComments} />\r\n\t\t\t{total > 0 ? (\r\n\t\t\t\t<div className=\"pagination-wrapper\">\r\n\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\ttotal={total}\r\n\t\t\t\t\t\tcurrentPage={page}\r\n\t\t\t\t\t\tonPageChange={handlePageChange}\r\n\t\t\t\t\t\tshowSizeChanger\r\n\t\t\t\t\t\tpageSize={limit}\r\n\t\t\t\t\t\tpageSizeOpts={[20, 30, 50]}\r\n\t\t\t\t\t\tonPageSizeChange={handleLimitChange}\r\n\t\t\t\t\t></Pagination>\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t\t<Spin\r\n\t\t\t\tspinning={loading}\r\n\t\t\t\ttip=\"loading...\"\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\ttop: \"50%\",\r\n\t\t\t\t\tleft: \"50%\",\r\n\t\t\t\t\ttransform: \"translate(-50%, -50%)\",\r\n\t\t\t\t\tzIndex: \"9999\",\r\n\t\t\t\t}}\r\n\t\t\t></Spin>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DetailLeft);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport style from \"./detailRight.module.less\";\r\nimport { IconPlay, IconPlus } from \"@douyinfe/semi-icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getSimiPlayList, getSimiSong } from \"../../../services/apis\";\r\n\r\nexport default function DetailRight(props) {\r\n\tconst { id } = props;\r\n\tconst [simiList, setSimiList] = useState([]); // 相似歌单\r\n\tconst [simiSongs, setSimiSongs] = useState([]); // 相似歌曲\r\n\t// 获取相似歌单\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tconst res = await getSimiPlayList({\r\n\t\t\t\tid,\r\n\t\t\t});\r\n\t\t\tif (res.code === 200) {\r\n\t\t\t\tsetSimiList(res.playlists);\r\n\t\t\t}\r\n\t\t})();\r\n\t\treturn () => { };\r\n\t}, []);\r\n\t// 获取相似歌曲\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tconst res = await getSimiSong({\r\n\t\t\t\tid,\r\n\t\t\t});\r\n\t\t\tif (res.code === 200) {\r\n\t\t\t\tsetSimiSongs(res.songs);\r\n\t\t\t}\r\n\t\t})();\r\n\t\treturn () => {\r\n\t\t}\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className={style[\"detail-right\"]}>\r\n\t\t\t{simiList && simiList.length ? <div className=\"play-simi\">\r\n\t\t\t\t<h3 className=\"title\">包含这首歌的歌单</h3>\r\n\t\t\t\t<div className=\"simi-content\">\r\n\t\t\t\t\t{simiList.map(l => <div key={l.id} className=\"simi-item\">\r\n\t\t\t\t\t\t<img src={l.coverImgUrl} alt=\"\" />\r\n\t\t\t\t\t\t<div className=\"desc\">\r\n\t\t\t\t\t\t\t<Link to={'/find/playlist/detail?id=' + l.id} className=\"sub-title\">{l.name}</Link>\r\n\t\t\t\t\t\t\t<span className=\"text\">by <Link to={'/user/home?uid=' + l.creator.userId} className=\"name\">{l.creator.nickname}</Link></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>)}\r\n\t\t\t\t</div>\r\n\t\t\t</div> : null}\r\n\t\t\t{simiSongs && simiSongs.length ? <div className=\"play-simi\">\r\n\t\t\t\t<h3 className=\"title\">相似歌曲</h3>\r\n\t\t\t\t<div className=\"simi-content\">\r\n\t\t\t\t\t{simiSongs.map(s => <div className=\"simi-item song-item\" key={s.id}>\r\n\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t<Link to={'/find/song?id=' + s.id} className=\"song-name\">{s.name}</Link>\r\n\t\t\t\t\t\t\t<div className=\"artists\">\r\n\t\t\t\t\t\t\t\t{s.artists.map((a, i) => (i === 0 ? <Link className=\"item\" key={a.id} to={'/find/artist?id=' + a.id}>{a.name}</Link> : <span className=\"divider\" key={a.id}>/<Link className=\"item\" to={'/find/artist?id=' + a.id}>{a.name}</Link></span>))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<IconPlay style={{ color: '#999' }} />\r\n\t\t\t\t\t\t<IconPlus style={{ color: '#999' }} />\r\n\t\t\t\t\t</div>)}\r\n\t\t\t\t</div>\r\n\t\t\t</div> : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport style from \"./index.module.less\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport qs from \"query-string\";\r\nimport { getSongDetail } from \"../../../services/apis\";\r\nimport DetailLeft from \"./DetailLeft\";\r\nimport DetailRight from \"./DetailRight\";\r\nimport {\r\n  IllustrationConstruction,\r\n  IllustrationConstructionDark,\r\n} from \"@douyinfe/semi-illustrations\";\r\nimport { Empty } from \"@douyinfe/semi-ui\";\r\n\r\nexport default function SongDetail() {\r\n  const [songDetail, setSongDetail] = useState(null); // 歌曲详情\r\n  const location = useLocation();\r\n  const ids = qs.parse(location.search).id; // 歌曲id\r\n  // 获取歌曲详情\r\n  useEffect(() => {\r\n    (async () => {\r\n      const res = await getSongDetail({\r\n        ids,\r\n      });\r\n      if (res.code === 200) {\r\n        setSongDetail(res.songs);\r\n      }\r\n    })();\r\n    return () => {};\r\n  }, [ids]);\r\n  return (\r\n    <>\r\n      {songDetail ? (\r\n        <div className={style[\"song-detail\"]}>\r\n          <div className=\"left\">\r\n            <DetailLeft detail={songDetail[0]} id={ids} />\r\n          </div>\r\n          <div className=\"right\">\r\n            <DetailRight id={ids} />\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <Empty\r\n          image={\r\n            <IllustrationConstruction style={{ width: 150, height: 150 }} />\r\n          }\r\n          darkModeImage={\r\n            <IllustrationConstructionDark style={{ width: 150, height: 150 }} />\r\n          }\r\n          description={\"信息丢失\"}\r\n          style={{ padding: 30 }}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"sourceRoot":""}