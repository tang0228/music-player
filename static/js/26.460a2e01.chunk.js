(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[26],{1029:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return j})),s.d(t,"a",(function(){return o}));var n=s(15),c=s.n(n),a=s(23),i=s(26);function r(e){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(c.a.mark((function e(t){var s,n,a,r,l,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.uid,n=t.limit,a=t.lasttime,r=t.timestamp,l=void 0===r?Date.now():r,e.next=3,i.a.get("/event",{params:{uid:s,limit:n,lasttime:a,timestamp:l}});case 3:return j=e.sent,e.abrupt("return",j);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(c.a.mark((function e(t){var s,n,a,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.id,n=t.type,a=void 0===n?"song":n,r=t.msg,e.next=3,i.a.post("/share/resource",{id:s,type:a,msg:r});case 3:return l=e.sent,e.abrupt("return",l);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(c.a.mark((function e(t){var s,n,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.evId,n=t.timestamp,a=void 0===n?Date.now():n,e.next=3,i.a.get("/event/del",{params:{evId:s,timestamp:a}});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},1086:function(e,t,s){e.exports={"friend-container":"index_friend-container__16ucv"}},1087:function(e,t,s){e.exports={"right-wrap":"right_right-wrap__Cmy1T"}},1088:function(e,t,s){e.exports={"left-wrap":"left_left-wrap__2nMeF"}},1089:function(e,t,s){},1159:function(e,t,s){"use strict";s.r(t);var n=s(11),c=s(15),a=s.n(c),i=s(204),r=s(23),l=s(19),j=s(1),u=s.n(j),o=s(1029),d=s(1086),b=s.n(d),m=s(1087),O=s.n(m),h=s(42),p=s(104),x=s(5);var f=function(e){var t=e.user,s=e.length,n=Object(j.useState)(null),c=Object(l.a)(n,2),a=c[0],i=c[1];return Object(j.useEffect)((function(){Object(p.z)({uid:t.userId}).then((function(e){200===e.code&&i(e.profile)}))}),[s]),Object(x.jsx)("div",{className:O.a["right-wrap"],children:a?Object(x.jsxs)("div",{className:"user-wrap",children:[Object(x.jsxs)("div",{className:"user-top",children:[Object(x.jsx)("div",{className:"img-wrap",children:Object(x.jsx)(h.b,{to:"/user/home?uid="+a.userId,children:Object(x.jsx)("img",{src:a.avatarUrl,alt:""})})}),Object(x.jsxs)("div",{className:"user-detail",children:[Object(x.jsx)(h.b,{to:"/user/home?uid="+a.userId,className:"name",children:a.nickname}),Object(x.jsx)("p",{className:"desc",children:a.signature})]})]}),Object(x.jsxs)("div",{className:"user-nums",children:[Object(x.jsxs)("div",{className:"box",children:[Object(x.jsx)("span",{children:a.eventCount}),Object(x.jsx)("span",{children:"\u52a8\u6001"})]}),Object(x.jsxs)("div",{className:"box",children:[Object(x.jsx)("span",{children:a.follows}),Object(x.jsx)("span",{children:"\u5173\u6ce8"})]}),Object(x.jsxs)("div",{className:"box",children:[Object(x.jsx)("span",{children:a.followeds}),Object(x.jsx)("span",{children:"\u7c89\u4e1d"})]})]})]}):null})},v=s(1088),g=s.n(v),N=(s(1089),s(27)),w=s(14),y=s(238),k=s(90),S={18:"\u5206\u4eab\u5355\u66f2",19:"\u5206\u4eab\u4e13\u8f91",17:"\u5206\u4eab\u7535\u53f0\u8282\u76ee",28:"\u5206\u4eab\u7535\u53f0\u8282\u76ee",22:"\u8f6c\u53d1",39:"\u53d1\u5e03\u89c6\u9891",24:"\u5206\u4eab\u4e13\u680f\u6587\u7ae0",35:"\u5206\u4eab\u6b4c\u5355",13:"\u5206\u4eab\u6b4c\u5355",41:"\u5206\u4eab\u89c6\u9891",21:"\u5206\u4eab\u89c6\u9891"};function C(e){var t=Object(j.useState)(!1),s=Object(l.a)(t,2),n=s[0],c=s[1],a=Object(j.useState)(!1),i=Object(l.a)(a,2),r=i[0],u=i[1],d=Object(j.useState)(null),b=Object(l.a)(d,2),m=b[0],O=b[1],p=Object(j.useState)(!1),f=Object(l.a)(p,2),v=f[0],C=f[1],I=Object(j.useState)(""),_=Object(l.a)(I,2),F=(_[0],_[1]),J=Object(j.useState)([]),z=Object(l.a)(J,2),D=z[0],E=z[1],T=Object(j.useState)(""),U=Object(l.a)(T,2),M=U[0],q=U[1],A=e.list,B=e.user,G=function(){M||m?u(!0):c(!1)},H=function(){C(!0)},K=function(t){Object(o.a)({evId:t}).then((function(s){200===s.code&&(N.y.success("\u5220\u9664\u6210\u529f"),e.delSuccess&&e.delSuccess(t))}))};return Object(x.jsxs)("div",{className:g.a["left-wrap"],children:[Object(x.jsxs)("div",{className:"list-header",children:[Object(x.jsx)("h3",{className:"title",children:"\u52a8\u6001"}),Object(x.jsx)("span",{className:"btn btn-video",title:"\u53d1\u52a8\u6001",onClick:function(){c(!0)}}),Object(x.jsx)("span",{className:"btn btn-msg",title:"\u53d1\u5e03\u89c6\u9891",onClick:function(){window.open("https://music.163.com/st/ncreator/upload")}})]}),A.length?Object(x.jsx)("ul",{className:"list-wrap",children:A.map((function(e){return Object(x.jsxs)("li",{className:"list-item",children:[B.userId===e.user.userId?Object(x.jsx)(N.l,{title:"\u63d0\u793a",content:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u8be5\u52a8\u6001\u5417\uff1f",onConfirm:K.bind(null,e.id),onCancel:function(){},children:Object(x.jsx)("span",{className:"icon-arrow",children:"\u5220\u9664"})}):null,Object(x.jsx)(h.b,{to:"/user/home?uid="+e.user.userId,children:Object(x.jsx)("img",{className:"avatar",src:e.user.avatarUrl,alt:""})}),Object(x.jsxs)("div",{className:"main-content",children:[Object(x.jsxs)("div",{className:"user-name",children:[Object(x.jsx)(h.b,{className:"nickname",to:"/user/home?uid="+e.user.userId,children:e.user.nickname}),Object(x.jsx)("span",{className:"text",children:S[e.type]})]}),Object(x.jsx)("div",{className:"time",children:k.a.formatDate(e.showTime)}),Object(x.jsx)("div",{className:"share-text",children:e.json.msg}),e.json.song?Object(x.jsxs)("div",{className:"flag",children:[Object(x.jsxs)("div",{className:"img-wrap",children:[Object(x.jsx)("img",{src:e.json.song.img80x80||"http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50",alt:""}),Object(x.jsx)("i",{className:"icon-play"})]}),Object(x.jsxs)("div",{className:"song-info",children:[Object(x.jsx)("p",{className:"song-name",children:Object(x.jsx)(h.b,{to:"/find/song?id="+e.json.song.id,children:e.json.song.name})}),Object(x.jsx)("p",{className:"artist-name",children:Object(x.jsx)(h.b,{to:"/find/artist?id="+e.json.song.artists[0].id,children:e.json.song.artists[0].name})})]})]}):null]})]},e.id)}))}):Object(x.jsx)(N.f,{title:"\u6682\u65f6\u8fd8\u6ca1\u6709\u52a8\u6001"}),Object(x.jsx)(N.j,{title:v?"\u6dfb\u52a0\u97f3\u4e50":"\u5206\u4eab",visible:n,mask:!1,onCancel:G,className:"share-modal",width:528,footer:v?Object(x.jsx)(N.c,{type:"primary",onClick:function(){C(!1),F(""),E([])},children:"\u8fd4\u56de"}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N.c,{type:"primary",onClick:function(){m?(Object(o.c)({id:m.id,msg:M}).then((function(t){200===t.code&&e.shareSuccess&&e.shareSuccess(t.event)})),c(!1),q(""),O(null)):N.y.warning({content:"\u8bf7\u9009\u62e9\u5355\u66f2\u54e6"})},disabled:!M||!m,children:"\u5206\u4eab"}),Object(x.jsx)(N.c,{type:"tertiary",onClick:G,children:"\u53d6\u6d88"})]}),children:v?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N.h,{prefix:Object(x.jsx)(w.S,{}),onChange:function(e){e?Object(y.a)({keywords:e}).then((function(e){200===e.code&&E(e.result.songs)})):E([])}}),Object(x.jsx)("ul",{className:"list-wrap",children:D.length?D.map((function(e,t){return Object(x.jsxs)("li",{onClick:function(){!function(e){O(e),C(!1)}(e)},className:k.a.isEven(t)?"list-item even":"list-item",children:[Object(x.jsx)("i",{className:"icon-play"}),Object(x.jsx)("span",{className:"song-name ell",children:e.name}),Object(x.jsx)("span",{className:"artist-name ell",children:e.artists.map((function(e,t){return Object(x.jsx)("span",{children:0!==t?"/"+e.name:e.name},e.id)}))})]},e.id)})):null})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(N.x,{placeholder:"\u4e00\u8d77\u804a\u804a\u5427~",value:M,maxCount:140,onChange:function(e){q(e)}}),m?Object(x.jsxs)("div",{className:"song-box",onClick:H,children:[Object(x.jsxs)("span",{className:"text",children:["\u5355\u66f2\uff1a",m.name," - ",m.artists.map((function(e,t){return Object(x.jsx)("span",{children:0!==t?"/"+e.name:e.name},e.id)}))," "]}),Object(x.jsx)("i",{className:"icon-arrow"})]}):Object(x.jsxs)("div",{className:"song-box",onClick:H,children:[Object(x.jsx)("i",{className:"icon-img"}),Object(x.jsx)("span",{className:"text",children:"\u7ed9\u52a8\u6001\u914d\u4e0a\u97f3\u4e50"}),Object(x.jsx)("i",{className:"icon-add"})]})]})}),Object(x.jsx)(N.j,{title:"\u63d0\u793a",visible:r,onOk:function(){u(!1),c(!1),q(""),O(null)},onCancel:function(){u(!1)},mask:!1,children:"\u662f\u5426\u9000\u51fa\u672c\u6b21\u7f16\u8f91\uff1f"})]})}var I=u.a.memo(C),_=s(105);t.default=Object(_.b)((function(e){return{user:e.user}}))((function(e){var t=e.user,s=Object(j.useState)([]),c=Object(l.a)(s,2),u=c[0],d=c[1],m=Object(j.useState)(!1),O=Object(l.a)(m,2),h=O[0],p=O[1];Object(j.useEffect)((function(){v()}),[]);var v=function(){var e=Object(r.a)(a.a.mark((function e(){var s,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,Object(o.b)({uid:t.userId,limit:20});case 3:200===(s=e.sent).code&&(p(!1),n=s.event.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{json:JSON.parse(e.json)})})),d(n));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:b.a["friend-container"],children:[Object(x.jsx)("div",{className:"left",children:Object(x.jsx)(I,{list:u,shareSuccess:function(e){d([Object(i.a)(Object(i.a)({},e),{},{json:JSON.parse(e.json)})].concat(Object(n.a)(u)))},delSuccess:function(e){var t=u.filter((function(t){return t.id!==e}));d(t)},user:t})}),Object(x.jsx)("div",{className:"right",children:Object(x.jsx)(f,{length:u.length,user:t})}),Object(x.jsx)(N.t,{spinning:h,tip:"loading...",size:"large",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"9999"}})]})}))}}]);
//# sourceMappingURL=26.460a2e01.chunk.js.map