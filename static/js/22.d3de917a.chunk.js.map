{"version":3,"sources":["components/Commit/index.jsx","components/Commit/index.module.less","components/CommitList/commitList.module.less","services/comment.js","components/CommitList/Item.jsx","components/CommitList/CommitList.jsx","pages/Song/SongDetail/index.module.less","pages/Song/SongDetail/detailLeft.module.less","pages/Song/SongDetail/detailRight.module.less","pages/Song/SongDetail/DetailLeft.jsx","pages/Song/SongDetail/DetailRight.jsx","pages/Song/SongDetail/index.jsx"],"names":["connect","state","user","props","useState","showEmoji","setShowEmoji","commitText","setCommitText","onEmojiClick","useCallback","e","emo","className","style","commit","id","commitNum","src","avatarUrl","alt","placeholder","value","onChange","val","maxCount","commitLength","onClick","Toast","warning","content","duration","module","exports","comment","a","t","type","commentId","timestamp","ins","post","res","likeComment","cid","threadId","c","to","userId","height","debounce","width","nickname","beReplied","length","map","be","beRepliedCommentId","timeStr","delComment","liked","commentLike","likedCount","CommitList","total","comments","hotComments","like","del","song","dispatch","addSong","addSongAction","setCurSongId","setCurSongIdAction","lyric","setLyric","open","setOpen","setComments","setHotComments","page","setPage","limit","setLimit","setTotal","loading","setLoading","detail","useEffect","getLyric","code","lrc","replace","songCommit","Date","now","success","getComments","handlePageChange","handleLimitChange","getSongComment","offset","error","play","getMusicPlayUrl","data","url","download","getSongUrl","console","log","al","picUrl","name","alia","item","index","ar","i","icon","utils","goAnchor","split","slice","join","Commit","currentPage","onPageChange","showSizeChanger","pageSize","pageSizeOpts","onPageSizeChange","spinning","tip","size","position","top","left","transform","zIndex","DetailRight","simiList","setSimiList","simiSongs","setSimiSongs","getSimiPlayList","playlists","getSimiSong","songs","l","coverImgUrl","creator","s","artists","color","SongDetail","songDetail","setSongDetail","location","useLocation","ids","qs","parse","search","getSongDetail","image","darkModeImage","description","padding"],"mappings":"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","file":"static/js/22.d3de917a.chunk.js","sourcesContent":["import React, { useCallback, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport style from \"./index.module.less\";\r\nimport { TextArea, Button, Toast } from \"@douyinfe/semi-ui\";\r\nimport Picker from \"emoji-picker-react\";\r\nimport { connect } from \"react-redux\";\r\nimport { IconImage } from \"@douyinfe/semi-icons\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n  };\r\n};\r\n\r\nfunction Commit(props) {\r\n  const user = props.user;\r\n  const [showEmoji, setShowEmoji] = useState(false);\r\n  const [commitText, setCommitText] = useState(\"\");// 评论内容\r\n//   const [emoText, setEmoText] = useState(\"\"); // 选择的emoji\r\n  const onEmojiClick = useCallback((e, emo) => {\r\n    //   setEmoText(emo.emoji);\r\n    //   setCommitText(emo.names[0] + commitText);\r\n  }, []);\r\n  const handleValueChange = (val) => {\r\n    setCommitText(val);\r\n  }\r\n  const showEmojiSelect = () => {\r\n    setShowEmoji(!showEmoji);\r\n  };\r\n  const commit = () => {\r\n      if(!commitText) {\r\n        Toast.warning({\r\n            content: \"请先输入内容哦😊\",\r\n            duration: 2\r\n        });\r\n        return;\r\n      }\r\n    // 回传给父组件\r\n      setCommitText(\"\"); // 输入框清空\r\n      props.commit && props.commit(commitText)\r\n  }\r\n  return (\r\n    <div className={style.commit} id=\"comment\">\r\n      <div className=\"commit-header\">\r\n        <h3 className=\"title\">评论</h3>\r\n        <span className=\"nums\">共{props.commitNum}条评论</span>\r\n      </div>\r\n      <div className=\"commit-wrap\">\r\n        <img src={user ? user.avatarUrl : 'http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50'} alt=\"\" />\r\n        <div className=\"commit-content\">\r\n          <TextArea placeholder=\"评论\" value={commitText} onChange={handleValueChange} maxCount={props.commitLength}></TextArea>\r\n          <div className=\"commit-opearte\">\r\n            <IconImage onClick={showEmojiSelect} />\r\n            <Button onClick={commit}>评论</Button>\r\n          </div>\r\n          {showEmoji ? (\r\n            <div className=\"emoji-box\">\r\n              <Picker onEmojiClick={onEmojiClick} />\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nCommit.propTypes = {\r\n  commitNum: PropTypes.number, // 评论数量\r\n  commitLength: PropTypes.number, // 评论内容限制长度\r\n};\r\n\r\nexport default connect(mapStateToProps)(Commit);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"commit\":\"index_commit__2Pc8Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comment-list\":\"commitList_comment-list__V9s6g\"};","import ins from \"./request\";\r\n\r\n/**\r\n * 新版获取评论列表\r\n * 资源 id, 如歌曲 id,mv id\r\n * type: 数字  0: 歌曲 1: mv 2: 歌单 3: 专辑 4: 电台 5: 视频 6: 动态\r\n * pageNo:分页参数,第 N 页,默认为 1\r\n * pageSize:分页参数,每页多少条数据,默认 20\r\n * sortType: 排序方式, 1:按推荐排序, 2:按热度排序, 3:按时间排序\r\n * cursor: 当sortType为 3 时且页数不是第一页时需传入,值为上一条数据的 time\r\n */\r\nexport async function getCommentList({id, type, pageNo = 1, pageSize = 20, timestamp}) {\r\n    const res = await ins.get(\"/comment/new\", {\r\n        params: {\r\n            id,\r\n            type, \r\n            pageNo, \r\n            pageSize,\r\n            timestamp\r\n        }\r\n    });\r\n    return res;\r\n};\r\n\r\n/**\r\n * 发送（回复）评论\r\n */\r\nexport async function comment({t, type, id, content, commentId, timestamp}) {\r\n    const res = await ins.post(\"/comment\", {\r\n            t, type, id, content, commentId, timestamp\r\n    });\r\n    return res;\r\n};\r\n\r\n// 给评论点赞\r\nexport async function likeComment({id, cid, t, type, threadId, timestamp }) {\r\n    const res = await ins.post(\"/comment/like\", {\r\n        id, cid, t, type, threadId, timestamp\r\n    });\r\n    return res;\r\n};\r\n","import React from \"react\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { IconLikeThumb } from \"@douyinfe/semi-icons\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tuser: state.user\r\n\t}\r\n};\r\n\r\nfunction Item(props) {\r\n\tconst { c, user } = props;\r\n\treturn (\r\n\t\t<li className=\"comment-item\" key={c.commentId}>\r\n\t\t\t<Link to={\"/user/home?uid=\" + c.user.userId}>\r\n\t\t\t\t<LazyLoad height={50} debounce={500} placeholder={<img width={50} height={50} src=\"http://s4.music.126.net/style/web2/img/default/default_avatar.jpg?param=50y50\" />}>\r\n\t\t\t\t\t<img src={c.user.avatarUrl} alt=\"\" />\r\n\t\t\t\t</LazyLoad>\r\n\t\t\t</Link>\r\n\t\t\t<div className=\"comment-desc\">\r\n\t\t\t\t<p className=\"comment-content\">\r\n\t\t\t\t\t<Link className=\"name\" to={\"/user/home?uid=\" + c.user.userId}>\r\n\t\t\t\t\t\t{c.user.nickname}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<span className=\"divider\">:</span>\r\n\t\t\t\t\t<span className=\"content\">{c.content}</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t{/* 回复评论列表 */}\r\n\t\t\t\t{c.beReplied.length\r\n\t\t\t\t\t? c.beReplied.map((be) => (\r\n\t\t\t\t\t\t<div key={be.beRepliedCommentId} className=\"beReplied\">\r\n\t\t\t\t\t\t\t<p className=\"comment-content\">\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tclassName=\"name\"\r\n\t\t\t\t\t\t\t\t\tto={\"/user/home?uid=\" + be.user.userId}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{be.user.nickname}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<span className=\"divider\">:</span>\r\n\t\t\t\t\t\t\t\t<span className=\"content\">{be.content}</span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))\r\n\t\t\t\t\t: null}\r\n\t\t\t\t<div className=\"comment-points\">\r\n\t\t\t\t\t<span className=\"time\">{c.timeStr}</span>\r\n\t\t\t\t\t<div className=\"operate\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tuser && c.user.userId === user.userId ? <span className=\"del-wrap\">\r\n\t\t\t\t\t\t\t\t<span className=\"reback\" onClick={() => {\r\n\t\t\t\t\t\t\t\t\tprops.delComment && props.delComment(c.commentId)\r\n\t\t\t\t\t\t\t\t}}>删除</span>\r\n\t\t\t\t\t\t\t\t<span className=\"line\">|</span>\r\n\t\t\t\t\t\t\t</span> : null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<span className={c.liked ? 'like liked' : 'like'} onClick={() => {\r\n\t\t\t\t\t\t\tprops.commentLike && props.commentLike(c.commentId, c.liked)\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<IconLikeThumb />\r\n\t\t\t\t\t\t\t{c.likedCount ? (\r\n\t\t\t\t\t\t\t\t<span className=\"num\">({c.likedCount})</span>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"line\">|</span>\r\n\t\t\t\t\t\t<span className=\"reback\">回复</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</li>\r\n\t);\r\n}\r\n\r\nexport default connect(mapStateToProps)(Item);\r\n","import React from \"react\";\r\nimport style from \"./commitList.module.less\";\r\nimport Item from \"./Item\"\r\n\r\nexport default function CommitList(props) {\r\n  const { total, comments, hotComments } = props;\r\n  const commentLike = (cid, liked) => {\r\n      props.like && props.like(cid, liked);\r\n  };\r\n  const delComment = (cid) => {\r\n      props.del && props.del(cid);\r\n  };\r\n  return (\r\n    <div className={style[\"comment-list\"]}>\r\n      {hotComments && hotComments.length ? (\r\n        <ul className=\"comment\">\r\n          <li className=\"header\">\r\n            <h3 className=\"title\">精彩评论</h3>\r\n          </li>\r\n          {hotComments.map((c) => (\r\n            <Item commentLike={commentLike} delComment={delComment} key={c.commentId} c={c}></Item>\r\n          ))}\r\n        </ul>\r\n      ) : null}\r\n      <br />\r\n      <br />\r\n      {comments && comments.length ? (\r\n        <ul className=\"comment\">\r\n          <li className=\"header\">\r\n            <h3 className=\"title\">最新评论({total})</h3>\r\n          </li>\r\n          {comments.map((c) => (\r\n            <Item commentLike={commentLike} delComment={delComment} key={c.commentId} c={c}></Item>\r\n          ))}\r\n        </ul>\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"song-detail\":\"index_song-detail__2Bp7r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detail-left\":\"detailLeft_detail-left__1z4Yl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detail-right\":\"detailRight_detail-right__jMZe9\"};","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport style from \"./detailLeft.module.less\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getLyric } from \"../../../services/apis\";\r\nimport { Button, Space, Toast, Pagination, Spin } from \"@douyinfe/semi-ui\";\r\nimport {\r\n\tIconPlayCircle,\r\n\tIconPlus,\r\n\tIconForward,\r\n\tIconDownload,\r\n\tIconComment,\r\n\tIconChevronUp,\r\n\tIconChevronDown,\r\n} from \"@douyinfe/semi-icons\";\r\nimport { getSongComment, getSongUrl, getMusicPlayUrl } from \"../../../services/apis\";\r\nimport CommitList from \"../../../components/CommitList/CommitList\";\r\nimport Commit from \"../../../components/Commit\";\r\nimport { comment, likeComment } from \"../../../services/comment\";\r\nimport { addSongAction } from \"../../../store/actions/song\";\r\nimport { setCurSongIdAction } from \"@/store/actions/curSongId\";\r\nimport { connect } from \"react-redux\";\r\nimport utils from \"../../../utils\";\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tsong: state.song\r\n\t}\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\taddSong: (...args) => dispatch(addSongAction(...args)),\r\n\t\tsetCurSongId: (...args) => dispatch(setCurSongIdAction(...args))\r\n\t};\r\n};\r\n\r\nfunction DetailLeft(props) {\r\n\tconst { id, addSong, setCurSongId } = props; // 歌曲ID\r\n\tconst [lyric, setLyric] = useState(\"\"); // 歌词\r\n\tconst [open, setOpen] = useState(false); // 是否展开歌词\r\n\tconst [comments, setComments] = useState([]); // 评论列表\r\n\tconst [hotComments, setHotComments] = useState([]); // 热门评论列表\r\n\tconst [page, setPage] = useState(1); // 评论列表\r\n\tconst [limit, setLimit] = useState(20); // 页容量\r\n\tconst [total, setTotal] = useState(0); // 总评论数\r\n\tconst [loading, setLoading] = useState(false); // loading\r\n\tconst detail = props.detail;\r\n\t// 获取歌词\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tconst res = await getLyric({\r\n\t\t\t\tid\r\n\t\t\t});\r\n\t\t\tif (res.code === 200) {\r\n\t\t\t\tsetLyric(res.lrc.lyric.replace(/\\[.*?\\]|\\x20/g, ''));\r\n\t\t\t}\r\n\t\t})();\r\n\t\treturn () => {\r\n\t\t}\r\n\t}, [id])\r\n\t// 提交评论\r\n\tconst songCommit = useCallback(async (val) => {\r\n\t\tconst res = await comment({\r\n\t\t\tt: 1,\r\n\t\t\ttype: 0,\r\n\t\t\tid,\r\n\t\t\tcontent: val,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tToast.success({\r\n\t\t\t\tcontent: \"评论成功\",\r\n\t\t\t\tduration: 2,\r\n\t\t\t});\r\n\t\t\tgetComments();\r\n\t\t}\r\n\t}, []);\r\n\t// 页码变化\r\n\tconst handlePageChange = useCallback((page) => {\r\n\t\tsetPage(page);\r\n\t}, []);\r\n\t// 页容量变化\r\n\tconst handleLimitChange = useCallback((limit) => {\r\n\t\tsetLimit(limit);\r\n\t}, []);\r\n\t// 获取评论\r\n\tconst getComments = async () => {\r\n\t\tsetLoading(true)\r\n\t\tconst res = await getSongComment({\r\n\t\t\tid,\r\n\t\t\tlimit,\r\n\t\t\toffset: (page - 1) * limit,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tsetLoading(false);\r\n\t\t\tsetTotal(res.total);\r\n\t\t\tsetComments(res.comments);\r\n\t\t\tsetHotComments(res.hotComments);\r\n\t\t}\r\n\t}\r\n\t// 获取评论列表\r\n\tuseEffect(() => {\r\n\t\tgetComments();\r\n\t\treturn () => { };\r\n\t}, [id, limit, page]);\r\n\r\n\t// 对评论 点赞/取消\r\n\tconst like = async (cid, liked) => {\r\n\t\tconst res = await likeComment({\r\n\t\t\tid,\r\n\t\t\tcid,\r\n\t\t\tt: liked ? 0 : 1,\r\n\t\t\ttype: 0,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tif (liked) {\r\n\t\t\t\tToast.success({\r\n\t\t\t\t\tcontent: \"取消赞成功\",\r\n\t\t\t\t\tduration: 2,\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tToast.success({\r\n\t\t\t\t\tcontent: \"赞成功\",\r\n\t\t\t\t\tduration: 2,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tgetComments();\r\n\t\t} else {\r\n\t\t\tToast.error({\r\n\t\t\t\tcontent: \"操作失败\",\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\r\n\t// 删除评论\r\n\tconst del = async (cid) => {\r\n\t\tconst res = await comment({\r\n\t\t\tt: 0,\r\n\t\t\ttype: 0,\r\n\t\t\tid: id,\r\n\t\t\tcommentId: cid,\r\n\t\t\ttimestamp: Date.now(),\r\n\t\t});\r\n\t\tif (res.code === 200) {\r\n\t\t\tToast.success({\r\n\t\t\t\tcontent: \"删除成功\",\r\n\t\t\t\tduration: 2,\r\n\t\t\t});\r\n\t\t\tgetComments();\r\n\t\t}\r\n\t};\r\n\r\n\t// 播放歌曲\r\n\tconst play = async () => {\r\n\t\tconst res = await getMusicPlayUrl({ id });\r\n\t\tsetCurSongId(id);\r\n\t\tif (res.code === 200 && res.data[0].url) {\r\n\t\t\taddSong(res.data);\r\n\t\t} else {\r\n\t\t\tToast.error({\r\n\t\t\t\tcontent: \"无权限\",\r\n\t\t\t\tduration: 2\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\r\n\t// 下载歌曲\r\n\tconst download = async () => {\r\n\t\tconst res = await getSongUrl({ id });\r\n\t\tconsole.log(res);\r\n\t};\r\n\treturn (\r\n\t\t<div className={style[\"detail-left\"]}>\r\n\t\t\t<div className=\"top-content\">\r\n\t\t\t\t<div className=\"img\">\r\n\t\t\t\t\t<img src={detail.al.picUrl} alt=\"\" />\r\n\t\t\t\t\t<span className=\"img-mask\"></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"list-content\">\r\n\t\t\t\t\t<div className=\"list-name\">\r\n\t\t\t\t\t\t<i className=\"icon-song\"></i>\r\n\t\t\t\t\t\t{detail.name}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"sub-name\">\r\n\t\t\t\t\t\t{detail.alia.map((item, index) => <span key={index} className=\"sub-item\">{item}</span>)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<span className=\"label\">歌手：</span>\r\n\t\t\t\t\t\t<div className=\"wrap\">\r\n\t\t\t\t\t\t\t{detail.ar.map((a, i) => (i === 0 ? <Link key={a.id} className=\"item\" to={'/find/artist?id=' + a.id}>{a.name}</Link> :\r\n\t\t\t\t\t\t\t\t<span key={a.id} className=\"divider\">/<Link className=\"item\" to={'/find/artist?id=' + a.id}>{a.name}</Link></span>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<span className=\"label\">所属专辑：</span>\r\n\t\t\t\t\t\t<div className=\"wrap\">\r\n\t\t\t\t\t\t\t<Link className=\"item\" to={'/find/album?id=' + detail.al.id}>{detail.al.name}</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"operates\">\r\n\t\t\t\t\t\t<Space>\r\n\t\t\t\t\t\t\t<Button onClick={play} type=\"danger\" icon={<IconPlayCircle />}>播放</Button>\r\n\t\t\t\t\t\t\t<Button type=\"tertiary\" icon={<IconPlus />}>收藏</Button>\r\n\t\t\t\t\t\t\t<Button type=\"tertiary\" icon={<IconForward />}>分享</Button>\r\n\t\t\t\t\t\t\t<Button onClick={download} type=\"tertiary\" icon={<IconDownload />}>下载</Button>\r\n\t\t\t\t\t\t\t<Button type=\"tertiary\" icon={<IconComment />} onClick={() => {\r\n\t\t\t\t\t\t\t\tutils.goAnchor(\"#comment\");\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t({total})\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Space>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"lyric\">{open ? lyric : lyric.split(\"\\n\").slice(0, 16).join(\"\\n\")}</div>\r\n\t\t\t\t\t<div className=\"arrow\" onClick={() => {\r\n\t\t\t\t\t\tsetOpen(!open);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<span className=\"text\">{open ? '收起' : '展开'}</span>\r\n\t\t\t\t\t\t{open ? <IconChevronUp /> : <IconChevronDown />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<Commit\r\n\t\t\t\tcommitNum={total}\r\n\t\t\t\tcommit={songCommit}\r\n\t\t\t\tcommitLength={140}\r\n\t\t\t/>\r\n\t\t\t<CommitList like={like} del={del} total={total} comments={comments} hotComments={hotComments} />\r\n\t\t\t{total > 0 ? (\r\n\t\t\t\t<div className=\"pagination-wrapper\">\r\n\t\t\t\t\t<Pagination\r\n\t\t\t\t\t\ttotal={total}\r\n\t\t\t\t\t\tcurrentPage={page}\r\n\t\t\t\t\t\tonPageChange={handlePageChange}\r\n\t\t\t\t\t\tshowSizeChanger\r\n\t\t\t\t\t\tpageSize={limit}\r\n\t\t\t\t\t\tpageSizeOpts={[20, 30, 50]}\r\n\t\t\t\t\t\tonPageSizeChange={handleLimitChange}\r\n\t\t\t\t\t></Pagination>\r\n\t\t\t\t</div>\r\n\t\t\t) : null}\r\n\t\t\t<Spin\r\n\t\t\t\tspinning={loading}\r\n\t\t\t\ttip=\"loading...\"\r\n\t\t\t\tsize=\"large\"\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\ttop: \"50%\",\r\n\t\t\t\t\tleft: \"50%\",\r\n\t\t\t\t\ttransform: \"translate(-50%, -50%)\",\r\n\t\t\t\t\tzIndex: \"9999\",\r\n\t\t\t\t}}\r\n\t\t\t></Spin>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DetailLeft);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport style from \"./detailRight.module.less\";\r\nimport { IconPlay, IconPlus } from \"@douyinfe/semi-icons\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getSimiPlayList, getSimiSong } from \"../../../services/apis\";\r\n\r\nexport default function DetailRight(props) {\r\n\tconst { id } = props;\r\n\tconst [simiList, setSimiList] = useState([]); // 相似歌单\r\n\tconst [simiSongs, setSimiSongs] = useState([]); // 相似歌曲\r\n\t// 获取相似歌单\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tconst res = await getSimiPlayList({\r\n\t\t\t\tid,\r\n\t\t\t});\r\n\t\t\tif (res.code === 200) {\r\n\t\t\t\tsetSimiList(res.playlists);\r\n\t\t\t}\r\n\t\t})();\r\n\t\treturn () => { };\r\n\t}, []);\r\n\t// 获取相似歌曲\r\n\tuseEffect(() => {\r\n\t\t(async () => {\r\n\t\t\tconst res = await getSimiSong({\r\n\t\t\t\tid,\r\n\t\t\t});\r\n\t\t\tif (res.code === 200) {\r\n\t\t\t\tsetSimiSongs(res.songs);\r\n\t\t\t}\r\n\t\t})();\r\n\t\treturn () => {\r\n\t\t}\r\n\t}, [])\r\n\treturn (\r\n\t\t<div className={style[\"detail-right\"]}>\r\n\t\t\t{simiList && simiList.length ? <div className=\"play-simi\">\r\n\t\t\t\t<h3 className=\"title\">包含这首歌的歌单</h3>\r\n\t\t\t\t<div className=\"simi-content\">\r\n\t\t\t\t\t{simiList.map(l => <div key={l.id} className=\"simi-item\">\r\n\t\t\t\t\t\t<img src={l.coverImgUrl} alt=\"\" />\r\n\t\t\t\t\t\t<div className=\"desc\">\r\n\t\t\t\t\t\t\t<Link to={'/find/playlist/detail?id=' + l.id} className=\"sub-title\">{l.name}</Link>\r\n\t\t\t\t\t\t\t<span className=\"text\">by <Link to={'/user/home?uid=' + l.creator.userId} className=\"name\">{l.creator.nickname}</Link></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>)}\r\n\t\t\t\t</div>\r\n\t\t\t</div> : null}\r\n\t\t\t{simiSongs && simiSongs.length ? <div className=\"play-simi\">\r\n\t\t\t\t<h3 className=\"title\">相似歌曲</h3>\r\n\t\t\t\t<div className=\"simi-content\">\r\n\t\t\t\t\t{simiSongs.map(s => <div className=\"simi-item song-item\" key={s.id}>\r\n\t\t\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t\t\t<Link to={'/find/song?id=' + s.id} className=\"song-name\">{s.name}</Link>\r\n\t\t\t\t\t\t\t<div className=\"artists\">\r\n\t\t\t\t\t\t\t\t{s.artists.map((a, i) => (i === 0 ? <Link className=\"item\" key={a.id} to={'/find/artist?id=' + a.id}>{a.name}</Link> : <span className=\"divider\" key={a.id}>/<Link className=\"item\" to={'/find/artist?id=' + a.id}>{a.name}</Link></span>))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<IconPlay style={{ color: '#999' }} />\r\n\t\t\t\t\t\t<IconPlus style={{ color: '#999' }} />\r\n\t\t\t\t\t</div>)}\r\n\t\t\t\t</div>\r\n\t\t\t</div> : null}\r\n\t\t</div>\r\n\t);\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport style from \"./index.module.less\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport qs from \"query-string\";\r\nimport { getSongDetail } from \"../../../services/apis\";\r\nimport DetailLeft from \"./DetailLeft\";\r\nimport DetailRight from \"./DetailRight\";\r\nimport {\r\n  IllustrationConstruction,\r\n  IllustrationConstructionDark,\r\n} from \"@douyinfe/semi-illustrations\";\r\nimport { Empty } from \"@douyinfe/semi-ui\";\r\n\r\nexport default function SongDetail() {\r\n  const [songDetail, setSongDetail] = useState(null); // 歌曲详情\r\n  const location = useLocation();\r\n  const ids = qs.parse(location.search).id; // 歌曲id\r\n  // 获取歌曲详情\r\n  useEffect(() => {\r\n    (async () => {\r\n      const res = await getSongDetail({\r\n        ids,\r\n      });\r\n      if (res.code === 200) {\r\n        setSongDetail(res.songs);\r\n      }\r\n    })();\r\n    return () => {};\r\n  }, [ids]);\r\n  return (\r\n    <>\r\n      {songDetail ? (\r\n        <div className={style[\"song-detail\"]}>\r\n          <div className=\"left\">\r\n            <DetailLeft detail={songDetail[0]} id={ids} />\r\n          </div>\r\n          <div className=\"right\">\r\n            <DetailRight id={ids} />\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <Empty\r\n          image={\r\n            <IllustrationConstruction style={{ width: 150, height: 150 }} />\r\n          }\r\n          darkModeImage={\r\n            <IllustrationConstructionDark style={{ width: 150, height: 150 }} />\r\n          }\r\n          description={\"信息丢失\"}\r\n          style={{ padding: 30 }}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"sourceRoot":""}